{
  "openapi": "3.1.0",
  "info": {
    "title": "Backend API",
    "description": "API документация для Backend проекта на Fastify + TypeScript + PostgreSQL\n\n## Глоссарий терминов\n\n- **ТФР (Территориальный финансовый репозиторий)** - централизованное хранилище финансовых отчётов\n- **DAPP** - Data Application Processing - система обработки данных\n- **FC** - File Conversion - система конвертации файлов",
    "version": "2.0.0",
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    }
  },
  "components": {
    "schemas": {
      "DateSchema": {
        "type": "string",
        "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
        "description": "Дата в формате YYYY-MM-DD",
        "title": "DateSchema"
      },
      "DateTimeSchema": {
        "type": "string",
        "format": "date-time",
        "pattern": "^(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))T(?:(?:[01]\\d|2[0-3]):[0-5]\\d(?::[0-5]\\d(?:\\.\\d+)?)?(?:Z))$",
        "description": "Дата и время в формате ISO 8601",
        "title": "DateTimeSchema"
      },
      "UuidSchema": {
        "type": "string",
        "format": "uuid",
        "pattern": "^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$",
        "description": "UUID в формате RFC 4122",
        "title": "UuidSchema"
      },
      "FileFormatEnumSchema": {
        "type": "string",
        "enum": [
          "TXT",
          "XLSX",
          "XML"
        ],
        "title": "FileFormatEnumSchema"
      },
      "ReportFormTypeEnum": {
        "type": "string",
        "enum": [
          "N3462D",
          "KROS",
          "N6406D"
        ],
        "description": "Тип формы отчетности",
        "title": "ReportFormTypeEnum",
        "x-enum-descriptions": [
          "3462у: Информация об открытых и закрытых счетах, Информация о счетах. Остатки, Информация о счетах. Операции",
          "КРОС: КРОС, Ведомость открытых счетов, Ведомость закрытых счетов",
          "6406у: Информация об открытых и закрытых счетах, Информация о счетах. Остатки, Информация о счетах. Операции"
        ],
        "x-enum-varnames": [
          "N3462D",
          "KROS",
          "N6406D"
        ],
        "oneOf": [
          {
            "description": "3462у: Информация об открытых и закрытых счетах, Информация о счетах. Остатки, Информация о счетах. Операции",
            "title": "N3462D",
            "enum": [
              "N3462D"
            ]
          },
          {
            "description": "КРОС: КРОС, Ведомость открытых счетов, Ведомость закрытых счетов",
            "title": "KROS",
            "enum": [
              "KROS"
            ]
          },
          {
            "description": "6406у: Информация об открытых и закрытых счетах, Информация о счетах. Остатки, Информация о счетах. Операции",
            "title": "N6406D",
            "enum": [
              "N6406D"
            ]
          }
        ]
      },
      "ReportTaskStatusEnumSchema": {
        "type": "string",
        "enum": [
          "upload_generation",
          "registered",
          "failed",
          "upload_not_formed",
          "upload_formed",
          "accepted_dapp",
          "submitted_dapp",
          "killed_dapp",
          "new_dapp",
          "saving_dapp",
          "created",
          "deleted",
          "started",
          "start_failed",
          "converting",
          "completed",
          "convert_stopped",
          "in_queue",
          "file_success_not_exist",
          "failed_fc",
          "have_broken_files"
        ],
        "title": "ReportTaskStatusEnumSchema"
      },
      "CurrencyEnumSchema": {
        "type": "string",
        "enum": [
          "RUB",
          "FOREIGN"
        ],
        "title": "CurrencyEnumSchema"
      },
      "SortOrderEnumSchema": {
        "default": "DESC",
        "description": "Направление сортировки",
        "type": "string",
        "enum": [
          "ASC",
          "DESC"
        ],
        "title": "SortOrderEnumSchema"
      },
      "SortOrderEnum": {
        "$ref": "#/components/schemas/SortOrderEnumSchema"
      },
      "PaginationRequestDto": {
        "type": "object",
        "properties": {
          "number": {
            "default": 1,
            "description": "Номер страницы (начиная с 1)",
            "type": "integer",
            "minimum": 1,
            "maximum": 9007199254740991
          },
          "size": {
            "default": 20,
            "description": "Размер страницы",
            "type": "integer",
            "minimum": 1,
            "maximum": 100
          }
        },
        "required": [
          "number",
          "size"
        ],
        "additionalProperties": false,
        "title": "PaginationRequestDto"
      },
      "PaginationMetadataDto": {
        "type": "object",
        "properties": {
          "number": {
            "type": "integer",
            "minimum": 1,
            "maximum": 9007199254740991,
            "description": "Текущий номер страницы"
          },
          "size": {
            "type": "integer",
            "minimum": 1,
            "maximum": 100,
            "description": "Размер страницы"
          },
          "totalItems": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991,
            "description": "Общее количество элементов"
          },
          "totalPages": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991,
            "description": "Общее количество страниц"
          }
        },
        "required": [
          "number",
          "size",
          "totalItems",
          "totalPages"
        ],
        "additionalProperties": false,
        "title": "PaginationMetadataDto"
      },
      "PaginatedResponseDto": {
        "type": "object",
        "properties": {
          "items": {
            "type": "array",
            "items": {},
            "description": "Список элементов"
          },
          "totalItems": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991,
            "description": "Общее количество элементов"
          }
        },
        "required": [
          "items",
          "totalItems"
        ],
        "additionalProperties": false,
        "title": "PaginatedResponseDto"
      },
      "SortingRequestDto": {
        "type": "object",
        "properties": {
          "direction": {
            "type": "string",
            "enum": [
              "asc",
              "desc"
            ],
            "description": "Направление сортировки"
          },
          "column": {
            "type": "string",
            "description": "Колонка для сортировки"
          }
        },
        "required": [
          "direction",
          "column"
        ],
        "additionalProperties": false,
        "title": "SortingRequestDto"
      },
      "FilterDto": {
        "type": "object",
        "properties": {
          "column": {
            "type": "string",
            "description": "Колонка для фильтрации"
          },
          "value": {
            "type": "string",
            "description": "Значение для фильтрации"
          }
        },
        "required": [
          "column",
          "value"
        ],
        "additionalProperties": false,
        "title": "FilterDto"
      },
      "StorageCodeEnumSchema": {
        "type": "string",
        "enum": [
          "TFR",
          "S3",
          "LOCAL"
        ],
        "title": "StorageCodeEnumSchema"
      },
      "HealthResponseDto": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "description": "Статус приложения"
          },
          "timestamp": {
            "type": "string",
            "description": "Время ответа в ISO 8601"
          },
          "database": {
            "type": "string",
            "description": "Статус подключения к БД"
          }
        },
        "required": [
          "status",
          "timestamp",
          "database"
        ],
        "additionalProperties": false,
        "title": "HealthResponseDto"
      },
      "HttpErrorWithInstanceDto": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "description": "URI типа ошибки"
          },
          "title": {
            "type": "string",
            "description": "Заголовок ошибки"
          },
          "status": {
            "type": "integer",
            "minimum": -9007199254740991,
            "maximum": 9007199254740991,
            "description": "HTTP статус"
          },
          "detail": {
            "type": "string",
            "description": "Детали ошибки"
          },
          "instance": {
            "type": "string",
            "description": "URI запроса"
          }
        },
        "required": [
          "type",
          "title",
          "status",
          "detail",
          "instance"
        ],
        "additionalProperties": false,
        "title": "HttpErrorWithInstanceDto"
      },
      "BranchDto": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UuidSchema"
          },
          "code": {
            "type": "string",
            "description": "Код филиала"
          },
          "name": {
            "type": "string",
            "description": "Название филиала"
          }
        },
        "required": [
          "id",
          "code",
          "name"
        ],
        "additionalProperties": false,
        "title": "BranchDto"
      },
      "CurrencyDto": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string"
          },
          "name": {
            "type": "string"
          }
        },
        "required": [
          "code",
          "name"
        ],
        "additionalProperties": false,
        "title": "CurrencyDto"
      },
      "FormatDto": {
        "$ref": "#/components/schemas/CurrencyDto"
      },
      "SourceDto": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "ris": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "required": [
          "code",
          "name",
          "ris"
        ],
        "additionalProperties": false,
        "title": "SourceDto"
      },
      "BranchesResponseDto": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/BranchDto"
        },
        "title": "BranchesResponseDto"
      },
      "CurrenciesResponseDto": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/CurrencyDto"
        },
        "title": "CurrenciesResponseDto"
      },
      "FormatsResponseDto": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/CurrencyDto"
        },
        "title": "FormatsResponseDto"
      },
      "SourcesResponseDto": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/SourceDto"
        },
        "title": "SourcesResponseDto"
      },
      "CreateTaskDto": {
        "type": "object",
        "properties": {
          "branchId": {
            "$ref": "#/components/schemas/UuidSchema"
          },
          "branchIds": {
            "description": "Массив идентификаторов филиалов",
            "minItems": 1,
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UuidSchema"
            }
          },
          "periodStart": {
            "$ref": "#/components/schemas/DateSchema"
          },
          "periodEnd": {
            "$ref": "#/components/schemas/DateSchema"
          },
          "accountMask": {
            "description": "Маска счетов для фильтрации",
            "type": "string",
            "maxLength": 20
          },
          "accountSecondOrder": {
            "description": "Счета второго порядка",
            "type": "string",
            "maxLength": 2
          },
          "currency": {
            "$ref": "#/components/schemas/CurrencyEnumSchema"
          },
          "format": {
            "$ref": "#/components/schemas/FileFormatEnumSchema"
          },
          "reportType": {
            "type": "string",
            "enum": [
              "LSOZ",
              "LSOS",
              "LSOP",
              "KROS_VOS",
              "KROS_VZS",
              "KROS"
            ],
            "description": "Тип отчёта"
          },
          "source": {
            "description": "Ссылка на справочник или идентификатор источника данных",
            "type": "string",
            "maxLength": 20
          }
        },
        "required": [
          "periodStart",
          "periodEnd",
          "format",
          "reportType"
        ],
        "additionalProperties": false,
        "title": "CreateTaskDto"
      },
      "TaskDto": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UuidSchema"
          },
          "createdAt": {
            "$ref": "#/components/schemas/DateTimeSchema"
          },
          "createdBy": {
            "type": "string",
            "description": "ФИО сотрудника, создавшего задание (всегда заполняется на BE при создании)"
          },
          "branchId": {
            "$ref": "#/components/schemas/UuidSchema"
          },
          "branchIds": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UuidSchema"
            },
            "description": "Массив идентификаторов филиалов"
          },
          "branchName": {
            "type": "string",
            "description": "Название филиала (название первого филиала)"
          },
          "branchNames": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Массив названий филиалов"
          },
          "periodStart": {
            "$ref": "#/components/schemas/DateSchema"
          },
          "periodEnd": {
            "$ref": "#/components/schemas/DateSchema"
          },
          "accountMask": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "Маска счетов для фильтрации"
          },
          "accountSecondOrder": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "Счета второго порядка"
          },
          "currency": {
            "$ref": "#/components/schemas/CurrencyEnumSchema"
          },
          "format": {
            "$ref": "#/components/schemas/FileFormatEnumSchema"
          },
          "reportType": {
            "$ref": "#/components/schemas/ReportFormTypeEnum"
          },
          "source": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "Ссылка на справочник или идентификатор источника данных"
          },
          "status": {
            "$ref": "#/components/schemas/ReportTaskStatusEnumSchema"
          },
          "canCancel": {
            "type": "boolean",
            "description": "Возможность отмены задания"
          },
          "canDelete": {
            "type": "boolean",
            "description": "Возможность удаления задания"
          },
          "canStart": {
            "type": "boolean",
            "description": "Возможность запуска задания"
          },
          "fileSize": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 0,
                "maximum": 9007199254740991,
                "description": "Размер файла в байтах. null — размер ещё не рассчитан (задание не завершено)."
              },
              {
                "type": "null"
              }
            ]
          },
          "filesCount": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991,
            "description": "Количество файлов в задании"
          },
          "fileUrl": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "URL для скачивания файла"
          },
          "errorMessage": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "Сообщение об ошибке"
          },
          "lastStatusChangedAt": {
            "$ref": "#/components/schemas/DateTimeSchema"
          },
          "startedAt": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/DateTimeSchema"
              },
              {
                "type": "null"
              }
            ],
            "description": "Дата и время начала обработки"
          },
          "completedAt": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/DateTimeSchema"
              },
              {
                "type": "null"
              }
            ],
            "description": "Дата и время завершения"
          },
          "updatedAt": {
            "$ref": "#/components/schemas/DateTimeSchema"
          }
        },
        "required": [
          "id",
          "createdAt",
          "createdBy",
          "branchId",
          "branchIds",
          "branchName",
          "branchNames",
          "periodStart",
          "periodEnd",
          "accountMask",
          "accountSecondOrder",
          "currency",
          "format",
          "reportType",
          "source",
          "status",
          "canCancel",
          "canDelete",
          "canStart",
          "fileSize",
          "filesCount",
          "fileUrl",
          "errorMessage",
          "lastStatusChangedAt",
          "startedAt",
          "completedAt",
          "updatedAt"
        ],
        "additionalProperties": false,
        "title": "TaskDto"
      },
      "TaskListItemDto": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UuidSchema"
          },
          "createdAt": {
            "$ref": "#/components/schemas/DateTimeSchema"
          },
          "createdBy": {
            "type": "string",
            "description": "ФИО сотрудника, создавшего задание (всегда заполняется на BE при возврате)"
          },
          "branchId": {
            "$ref": "#/components/schemas/UuidSchema"
          },
          "branchIds": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UuidSchema"
            },
            "description": "Массив идентификаторов филиалов"
          },
          "branchName": {
            "type": "string",
            "description": "Название филиала (название первого филиала)"
          },
          "branchNames": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Массив названий филиалов"
          },
          "periodStart": {
            "$ref": "#/components/schemas/DateSchema"
          },
          "periodEnd": {
            "$ref": "#/components/schemas/DateSchema"
          },
          "status": {
            "$ref": "#/components/schemas/ReportTaskStatusEnumSchema"
          },
          "fileSize": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 0,
                "maximum": 9007199254740991,
                "description": "Размер файла в байтах; null — размер ещё не рассчитан."
              },
              {
                "type": "null"
              }
            ]
          },
          "format": {
            "$ref": "#/components/schemas/FileFormatEnumSchema"
          },
          "reportType": {
            "$ref": "#/components/schemas/ReportFormTypeEnum"
          },
          "updatedAt": {
            "$ref": "#/components/schemas/DateTimeSchema"
          },
          "canCancel": {
            "type": "boolean",
            "description": "Можно ли отменить задание"
          },
          "canDelete": {
            "type": "boolean",
            "description": "Можно ли удалить задание"
          },
          "canStart": {
            "type": "boolean",
            "description": "Можно ли запустить задание"
          },
          "packageIds": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UuidSchema"
            },
            "description": "ID пакетов, в которые входит задание (пустой массив = не в пакете)"
          }
        },
        "required": [
          "id",
          "createdAt",
          "createdBy",
          "branchId",
          "branchIds",
          "branchName",
          "branchNames",
          "periodStart",
          "periodEnd",
          "status",
          "fileSize",
          "format",
          "reportType",
          "updatedAt",
          "canCancel",
          "canDelete",
          "canStart",
          "packageIds"
        ],
        "additionalProperties": false,
        "title": "TaskListItemDto"
      },
      "GetTasksRequestDto": {
        "type": "object",
        "properties": {
          "pagination": {
            "$ref": "#/components/schemas/PaginationRequestDto"
          },
          "sorting": {
            "type": "object",
            "properties": {
              "direction": {
                "type": "string",
                "enum": [
                  "asc",
                  "desc"
                ],
                "description": "Направление сортировки"
              },
              "column": {
                "type": "string",
                "enum": [
                  "createdAt",
                  "branchId",
                  "status",
                  "periodStart",
                  "periodEnd",
                  "updatedAt",
                  "branchName",
                  "reportType",
                  "format",
                  "createdBy"
                ],
                "description": "Колонка для сортировки"
              }
            },
            "required": [
              "direction",
              "column"
            ],
            "additionalProperties": false,
            "description": "Параметры сортировки (колонка — фиксированный набор)"
          },
          "filter": {
            "description": "Фильтры для списка заданий (объект с опциональными полями)",
            "type": "object",
            "properties": {
              "packageId": {
                "description": "ID пакета (null — задания без пакета)",
                "anyOf": [
                  {
                    "$ref": "#/components/schemas/UuidSchema"
                  },
                  {
                    "type": "null"
                  }
                ]
              },
              "branchIds": {
                "description": "Массив идентификаторов филиалов",
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/UuidSchema"
                }
              },
              "branchName": {
                "description": "Название филиала",
                "type": "string"
              },
              "status": {
                "$ref": "#/components/schemas/ReportTaskStatusEnumSchema"
              },
              "reportType": {
                "$ref": "#/components/schemas/ReportFormTypeEnum"
              },
              "format": {
                "$ref": "#/components/schemas/FileFormatEnumSchema"
              },
              "source": {
                "description": "Источник данных",
                "type": "string"
              },
              "createdBy": {
                "description": "ФИО создателя задания",
                "type": "string"
              },
              "periodStart": {
                "$ref": "#/components/schemas/DateSchema"
              },
              "periodEnd": {
                "$ref": "#/components/schemas/DateSchema"
              },
              "createdAt": {
                "$ref": "#/components/schemas/DateTimeSchema"
              },
              "updatedAt": {
                "$ref": "#/components/schemas/DateTimeSchema"
              }
            },
            "additionalProperties": false
          },
          "includedInPackage": {
            "$ref": "#/components/schemas/UuidSchema"
          },
          "excludedInPackage": {
            "$ref": "#/components/schemas/UuidSchema"
          }
        },
        "required": [
          "pagination",
          "sorting"
        ],
        "additionalProperties": false,
        "title": "GetTasksRequestDto"
      },
      "TasksListResponseDto": {
        "type": "object",
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TaskListItemDto"
            },
            "description": "Список заданий"
          },
          "totalItems": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991,
            "description": "Общее количество заданий"
          }
        },
        "required": [
          "items",
          "totalItems"
        ],
        "additionalProperties": false,
        "title": "TasksListResponseDto"
      },
      "TaskDetailDto": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UuidSchema"
          },
          "createdAt": {
            "$ref": "#/components/schemas/DateTimeSchema"
          },
          "createdBy": {
            "type": "string",
            "description": "ФИО сотрудника, создавшего задание (всегда заполняется на BE при создании)"
          },
          "branchId": {
            "$ref": "#/components/schemas/UuidSchema"
          },
          "branchIds": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UuidSchema"
            },
            "description": "Массив идентификаторов филиалов"
          },
          "branchName": {
            "type": "string",
            "description": "Название филиала (название первого филиала)"
          },
          "branchNames": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Массив названий филиалов"
          },
          "periodStart": {
            "$ref": "#/components/schemas/DateSchema"
          },
          "periodEnd": {
            "$ref": "#/components/schemas/DateSchema"
          },
          "accountMask": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "Маска счетов для фильтрации"
          },
          "accountSecondOrder": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "Счета второго порядка"
          },
          "currency": {
            "$ref": "#/components/schemas/CurrencyEnumSchema"
          },
          "format": {
            "$ref": "#/components/schemas/FileFormatEnumSchema"
          },
          "reportType": {
            "$ref": "#/components/schemas/ReportFormTypeEnum"
          },
          "source": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "Ссылка на справочник или идентификатор источника данных"
          },
          "status": {
            "$ref": "#/components/schemas/ReportTaskStatusEnumSchema"
          },
          "canCancel": {
            "type": "boolean",
            "description": "Возможность отмены задания"
          },
          "canDelete": {
            "type": "boolean",
            "description": "Возможность удаления задания"
          },
          "canStart": {
            "type": "boolean",
            "description": "Возможность запуска задания"
          },
          "fileSize": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 0,
                "maximum": 9007199254740991,
                "description": "Размер файла в байтах. null — размер ещё не рассчитан (задание не завершено)."
              },
              {
                "type": "null"
              }
            ]
          },
          "filesCount": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991,
            "description": "Количество файлов в задании"
          },
          "fileUrl": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "URL для скачивания файла"
          },
          "errorMessage": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "Сообщение об ошибке"
          },
          "lastStatusChangedAt": {
            "$ref": "#/components/schemas/DateTimeSchema"
          },
          "startedAt": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/DateTimeSchema"
              },
              {
                "type": "null"
              }
            ],
            "description": "Дата и время начала обработки"
          },
          "completedAt": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/DateTimeSchema"
              },
              {
                "type": "null"
              }
            ],
            "description": "Дата и время завершения"
          },
          "updatedAt": {
            "$ref": "#/components/schemas/DateTimeSchema"
          },
          "packages": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "$ref": "#/components/schemas/UuidSchema"
                },
                "name": {
                  "type": "string"
                },
                "addedAt": {
                  "$ref": "#/components/schemas/DateTimeSchema"
                }
              },
              "required": [
                "id",
                "name",
                "addedAt"
              ],
              "additionalProperties": false
            }
          }
        },
        "required": [
          "id",
          "createdAt",
          "createdBy",
          "branchId",
          "branchIds",
          "branchName",
          "branchNames",
          "periodStart",
          "periodEnd",
          "accountMask",
          "accountSecondOrder",
          "currency",
          "format",
          "reportType",
          "source",
          "status",
          "canCancel",
          "canDelete",
          "canStart",
          "fileSize",
          "filesCount",
          "fileUrl",
          "errorMessage",
          "lastStatusChangedAt",
          "startedAt",
          "completedAt",
          "updatedAt",
          "packages"
        ],
        "additionalProperties": false,
        "title": "TaskDetailDto"
      },
      "TaskDetailsDto": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UuidSchema"
          },
          "createdAt": {
            "$ref": "#/components/schemas/DateTimeSchema"
          },
          "createdBy": {
            "type": "string",
            "description": "ФИО сотрудника, создавшего задание (всегда заполняется на BE при создании)"
          },
          "branchId": {
            "$ref": "#/components/schemas/UuidSchema"
          },
          "branchIds": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UuidSchema"
            },
            "description": "Массив идентификаторов филиалов"
          },
          "branchName": {
            "type": "string",
            "description": "Название филиала (название первого филиала)"
          },
          "branchNames": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Массив названий филиалов"
          },
          "periodStart": {
            "$ref": "#/components/schemas/DateSchema"
          },
          "periodEnd": {
            "$ref": "#/components/schemas/DateSchema"
          },
          "accountMask": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "Маска счетов для фильтрации"
          },
          "accountSecondOrder": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "Счета второго порядка"
          },
          "currency": {
            "$ref": "#/components/schemas/CurrencyEnumSchema"
          },
          "format": {
            "$ref": "#/components/schemas/FileFormatEnumSchema"
          },
          "reportType": {
            "type": "string",
            "enum": [
              "LSOZ",
              "LSOS",
              "LSOP",
              "KROS_VOS",
              "KROS_VZS",
              "KROS"
            ],
            "description": "Тип отчёта"
          },
          "source": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "Ссылка на справочник или идентификатор источника данных"
          },
          "status": {
            "$ref": "#/components/schemas/ReportTaskStatusEnumSchema"
          },
          "canCancel": {
            "type": "boolean",
            "description": "Возможность отмены задания"
          },
          "canDelete": {
            "type": "boolean",
            "description": "Возможность удаления задания"
          },
          "canStart": {
            "type": "boolean",
            "description": "Возможность запуска задания"
          },
          "fileSize": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 0,
                "maximum": 9007199254740991,
                "description": "Размер файла в байтах. null — размер ещё не рассчитан."
              },
              {
                "type": "null"
              }
            ]
          },
          "filesCount": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991,
            "description": "Количество файлов в задании"
          },
          "lastStatusChangedAt": {
            "$ref": "#/components/schemas/DateTimeSchema"
          },
          "startedAt": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/DateTimeSchema"
              },
              {
                "type": "null"
              }
            ],
            "description": "Дата и время начала обработки"
          },
          "completedAt": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/DateTimeSchema"
              },
              {
                "type": "null"
              }
            ],
            "description": "Дата и время завершения"
          },
          "updatedAt": {
            "$ref": "#/components/schemas/DateTimeSchema"
          },
          "s3FolderId": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "ID папки в S3"
          },
          "type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "Тип задания"
          },
          "accounts": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Список счетов"
          },
          "packages": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "$ref": "#/components/schemas/UuidSchema"
                },
                "name": {
                  "type": "string"
                },
                "addedAt": {
                  "$ref": "#/components/schemas/DateTimeSchema"
                }
              },
              "required": [
                "id",
                "name",
                "addedAt"
              ],
              "additionalProperties": false
            },
            "description": "Пакеты, в которые входит задание"
          }
        },
        "required": [
          "id",
          "createdAt",
          "createdBy",
          "branchId",
          "branchIds",
          "branchName",
          "branchNames",
          "periodStart",
          "periodEnd",
          "accountMask",
          "accountSecondOrder",
          "currency",
          "format",
          "reportType",
          "source",
          "status",
          "canCancel",
          "canDelete",
          "canStart",
          "fileSize",
          "filesCount",
          "lastStatusChangedAt",
          "startedAt",
          "completedAt",
          "updatedAt",
          "s3FolderId",
          "type",
          "accounts",
          "packages"
        ],
        "additionalProperties": false,
        "title": "TaskDetailsDto"
      },
      "BulkDeleteTasksResponseDto": {
        "type": "object",
        "properties": {
          "deleted": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991
          },
          "failed": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991
          },
          "results": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "taskId": {
                  "$ref": "#/components/schemas/UuidSchema"
                },
                "success": {
                  "type": "boolean"
                },
                "reason": {
                  "type": "string"
                }
              },
              "required": [
                "taskId",
                "success"
              ],
              "additionalProperties": false
            }
          }
        },
        "required": [
          "deleted",
          "failed",
          "results"
        ],
        "additionalProperties": false,
        "title": "BulkDeleteTasksResponseDto"
      },
      "BulkCancelTasksResponseDto": {
        "type": "object",
        "properties": {
          "cancelled": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991
          },
          "failed": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991
          },
          "results": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "taskId": {
                  "$ref": "#/components/schemas/UuidSchema"
                },
                "success": {
                  "type": "boolean"
                },
                "status": {
                  "$ref": "#/components/schemas/ReportTaskStatusEnumSchema"
                },
                "updatedAt": {
                  "$ref": "#/components/schemas/DateTimeSchema"
                },
                "reason": {
                  "type": "string"
                }
              },
              "required": [
                "taskId",
                "success"
              ],
              "additionalProperties": false
            }
          }
        },
        "required": [
          "cancelled",
          "failed",
          "results"
        ],
        "additionalProperties": false,
        "title": "BulkCancelTasksResponseDto"
      },
      "StartTasksResponseDto": {
        "type": "object",
        "properties": {
          "started": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991
          },
          "failed": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991
          },
          "results": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "taskId": {
                  "$ref": "#/components/schemas/UuidSchema"
                },
                "status": {
                  "$ref": "#/components/schemas/ReportTaskStatusEnumSchema"
                },
                "startedAt": {
                  "$ref": "#/components/schemas/DateTimeSchema"
                }
              },
              "required": [
                "taskId",
                "status",
                "startedAt"
              ],
              "additionalProperties": false
            }
          },
          "errors": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "taskId": {
                  "$ref": "#/components/schemas/UuidSchema"
                },
                "reason": {
                  "type": "string"
                }
              },
              "required": [
                "taskId",
                "reason"
              ],
              "additionalProperties": false
            }
          }
        },
        "required": [
          "started",
          "failed",
          "results",
          "errors"
        ],
        "additionalProperties": false,
        "title": "StartTasksResponseDto"
      },
      "StatusHistoryItemDto": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UuidSchema"
          },
          "status": {
            "$ref": "#/components/schemas/ReportTaskStatusEnumSchema"
          },
          "previousStatus": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ReportTaskStatusEnumSchema"
              },
              {
                "type": "null"
              }
            ]
          },
          "changedAt": {
            "$ref": "#/components/schemas/DateTimeSchema"
          },
          "changedBy": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ]
          },
          "comment": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ]
          },
          "metadata": {
            "anyOf": [
              {
                "type": "object",
                "additionalProperties": {}
              },
              {
                "type": "null"
              }
            ],
            "description": "Дополнительные метаданные в формате ключ-значение"
          }
        },
        "required": [
          "id",
          "status",
          "previousStatus",
          "changedAt",
          "changedBy",
          "comment",
          "metadata"
        ],
        "additionalProperties": false,
        "title": "StatusHistoryItemDto"
      },
      "StatusHistoryResponseDto": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/StatusHistoryItemDto"
        },
        "title": "StatusHistoryResponseDto"
      },
      "TaskFileDto": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UuidSchema"
          },
          "fileName": {
            "type": "string"
          },
          "fileSize": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991,
            "description": "Размер файла в байтах (например, 10485760 = 10 MB)"
          },
          "fileType": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "PENDING",
              "CONVERTING",
              "COMPLETED",
              "FAILED"
            ]
          },
          "downloadUrl": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ]
          },
          "downloadUrlExpiresAt": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/DateTimeSchema"
              },
              {
                "type": "null"
              }
            ]
          },
          "errorMessage": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ]
          },
          "createdAt": {
            "$ref": "#/components/schemas/DateTimeSchema"
          },
          "updatedAt": {
            "$ref": "#/components/schemas/DateTimeSchema"
          }
        },
        "required": [
          "id",
          "fileName",
          "fileSize",
          "fileType",
          "status",
          "downloadUrl",
          "downloadUrlExpiresAt",
          "errorMessage",
          "createdAt",
          "updatedAt"
        ],
        "additionalProperties": false,
        "title": "TaskFileDto"
      },
      "TaskFilesResponseDto": {
        "type": "object",
        "properties": {
          "taskId": {
            "$ref": "#/components/schemas/UuidSchema"
          },
          "files": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TaskFileDto"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/PaginationMetadataDto"
          }
        },
        "required": [
          "taskId",
          "files",
          "pagination"
        ],
        "additionalProperties": false,
        "title": "TaskFilesResponseDto"
      },
      "RetryFileConversionResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UuidSchema"
          },
          "status": {
            "type": "string",
            "enum": [
              "PENDING",
              "CONVERTING",
              "COMPLETED",
              "FAILED"
            ]
          },
          "message": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "status",
          "message"
        ],
        "additionalProperties": false,
        "title": "RetryFileConversionResponseDto"
      },
      "CreatePackageDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 255,
            "description": "Название пакета"
          },
          "createdBy": {
            "type": "string",
            "minLength": 1,
            "maxLength": 255,
            "description": "Создатель пакета"
          }
        },
        "required": [
          "name",
          "createdBy"
        ],
        "additionalProperties": false,
        "title": "CreatePackageDto"
      },
      "UpdatePackageDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 255,
            "description": "Новое название пакета"
          }
        },
        "required": [
          "name"
        ],
        "additionalProperties": false,
        "title": "UpdatePackageDto"
      },
      "PackageDto": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UuidSchema"
          },
          "name": {
            "type": "string",
            "description": "Название пакета"
          },
          "createdAt": {
            "$ref": "#/components/schemas/DateTimeSchema"
          },
          "createdBy": {
            "type": "string",
            "description": "Создатель пакета"
          },
          "lastCopiedToTfrAt": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/DateTimeSchema"
              },
              {
                "type": "null"
              }
            ],
            "description": "Дата последнего копирования в ТФР"
          },
          "tasksCount": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991,
            "description": "Количество заданий в пакете"
          },
          "totalSize": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991,
            "description": "Общий размер пакета в байтах (сумма размеров всех файлов). Всегда число; 0 при пустом пакете."
          },
          "updatedAt": {
            "$ref": "#/components/schemas/DateTimeSchema"
          }
        },
        "required": [
          "id",
          "name",
          "createdAt",
          "createdBy",
          "lastCopiedToTfrAt",
          "tasksCount",
          "totalSize",
          "updatedAt"
        ],
        "additionalProperties": false,
        "title": "PackageDto"
      },
      "PackagesListResponseDto": {
        "type": "object",
        "properties": {
          "packages": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PackageDto"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/PaginationMetadataDto"
          }
        },
        "required": [
          "packages",
          "pagination"
        ],
        "additionalProperties": false,
        "title": "PackagesListResponseDto"
      },
      "BulkDeletePackagesResponseDto": {
        "type": "object",
        "properties": {
          "deleted": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991
          },
          "failed": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991
          },
          "results": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "packageId": {
                  "$ref": "#/components/schemas/UuidSchema"
                },
                "success": {
                  "type": "boolean"
                },
                "reason": {
                  "type": "string"
                }
              },
              "required": [
                "packageId",
                "success"
              ],
              "additionalProperties": false
            }
          }
        },
        "required": [
          "deleted",
          "failed",
          "results"
        ],
        "additionalProperties": false,
        "title": "BulkDeletePackagesResponseDto"
      },
      "UpdatePackageResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UuidSchema"
          },
          "name": {
            "type": "string"
          },
          "updatedAt": {
            "$ref": "#/components/schemas/DateTimeSchema"
          }
        },
        "required": [
          "id",
          "name",
          "updatedAt"
        ],
        "additionalProperties": false,
        "title": "UpdatePackageResponseDto"
      },
      "AddTasksToPackageResponseDto": {
        "type": "object",
        "properties": {
          "added": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991
          },
          "alreadyInPackage": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991
          },
          "notFound": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991
          },
          "errors": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "taskId": {
                  "$ref": "#/components/schemas/UuidSchema"
                },
                "reason": {
                  "type": "string"
                }
              },
              "required": [
                "taskId",
                "reason"
              ],
              "additionalProperties": false
            }
          }
        },
        "required": [
          "added",
          "alreadyInPackage",
          "notFound",
          "errors"
        ],
        "additionalProperties": false,
        "title": "AddTasksToPackageResponseDto"
      },
      "BulkRemoveTasksResponseDto": {
        "type": "object",
        "properties": {
          "removed": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991
          },
          "failed": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991
          },
          "results": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "taskId": {
                  "$ref": "#/components/schemas/UuidSchema"
                },
                "success": {
                  "type": "boolean"
                },
                "reason": {
                  "type": "string"
                }
              },
              "required": [
                "taskId",
                "success"
              ],
              "additionalProperties": false
            }
          }
        },
        "required": [
          "removed",
          "failed",
          "results"
        ],
        "additionalProperties": false,
        "title": "BulkRemoveTasksResponseDto"
      },
      "CopyToTfrResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UuidSchema"
          },
          "lastCopiedToTfrAt": {
            "$ref": "#/components/schemas/DateTimeSchema"
          },
          "message": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "lastCopiedToTfrAt",
          "message"
        ],
        "additionalProperties": false,
        "title": "CopyToTfrResponseDto"
      },
      "ExportTasksRequestDto": {
        "type": "object",
        "properties": {
          "filters": {
            "type": "object",
            "properties": {
              "statuses": {
                "description": "Список статусов для фильтрации",
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/ReportTaskStatusEnumSchema"
                }
              },
              "branchIds": {
                "description": "Список идентификаторов филиалов для фильтрации",
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/UuidSchema"
                }
              },
              "reportTypes": {
                "description": "Список типов отчётов для фильтрации",
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/ReportFormTypeEnum"
                }
              },
              "formats": {
                "description": "Список форматов для фильтрации",
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/FileFormatEnumSchema"
                }
              },
              "periodStartFrom": {
                "$ref": "#/components/schemas/DateSchema"
              },
              "periodStartTo": {
                "$ref": "#/components/schemas/DateSchema"
              },
              "periodEndFrom": {
                "$ref": "#/components/schemas/DateSchema"
              },
              "periodEndTo": {
                "$ref": "#/components/schemas/DateSchema"
              },
              "createdAtFrom": {
                "$ref": "#/components/schemas/DateTimeSchema"
              },
              "createdAtTo": {
                "$ref": "#/components/schemas/DateTimeSchema"
              }
            },
            "additionalProperties": false
          },
          "columns": {
            "description": "Список колонок для включения в экспорт",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "sortBy": {
            "default": "createdAt",
            "description": "Поле для сортировки",
            "type": "string",
            "enum": [
              "createdAt",
              "branchId",
              "status",
              "periodStart",
              "updatedAt"
            ]
          },
          "sortOrder": {
            "$ref": "#/components/schemas/SortOrderEnumSchema"
          }
        },
        "required": [
          "sortBy",
          "sortOrder"
        ],
        "additionalProperties": false,
        "title": "ExportTasksRequestDto"
      },
      "ExportTasksResponseDto": {
        "type": "object",
        "properties": {
          "exportId": {
            "$ref": "#/components/schemas/UuidSchema"
          },
          "status": {
            "type": "string",
            "description": "Статус экспорта",
            "enum": [
              "COMPLETED"
            ]
          },
          "fileUrl": {
            "type": "string",
            "description": "URL для скачивания файла"
          },
          "fileSize": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991,
            "description": "Размер экспортированного файла в байтах (например, 52428800 = 50 MB)"
          },
          "downloadUrlExpiresAt": {
            "$ref": "#/components/schemas/DateTimeSchema"
          },
          "recordsCount": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991,
            "description": "Количество записей в экспортированном файле"
          },
          "createdAt": {
            "$ref": "#/components/schemas/DateTimeSchema"
          }
        },
        "required": [
          "exportId",
          "status",
          "fileUrl",
          "fileSize",
          "downloadUrlExpiresAt",
          "recordsCount",
          "createdAt"
        ],
        "additionalProperties": false,
        "title": "ExportTasksResponseDto"
      },
      "StorageVolumeItemDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Уникальный идентификатор хранилища для key в JSX"
          },
          "name": {
            "type": "string",
            "description": "Имя хранилища (например, \"Корзина 1\", \"ТФР\")"
          },
          "code": {
            "$ref": "#/components/schemas/StorageCodeEnumSchema"
          },
          "totalHuman": {
            "type": "string",
            "description": "Общий объём хранилища в человекочитаемом формате (например, \"1.00 TB\")"
          },
          "freeHuman": {
            "type": "string",
            "description": "Свободный объём в человекочитаемом формате (например, \"535.72 GB\")"
          },
          "percent": {
            "type": "number",
            "minimum": 0,
            "maximum": 100,
            "description": "Процент заполнения (0–100)"
          }
        },
        "required": [
          "id",
          "name",
          "code",
          "totalHuman",
          "freeHuman",
          "percent"
        ],
        "additionalProperties": false,
        "title": "StorageVolumeItemDto"
      },
      "StorageVolumeListResponseDto": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/StorageVolumeItemDto"
        },
        "title": "StorageVolumeListResponseDto"
      }
    }
  },
  "paths": {
    "/health": {
      "get": {
        "tags": [
          "Health"
        ],
        "description": "Проверка состояния приложения и подключения к БД",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponseDto"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HttpErrorWithInstanceDto"
                }
              }
            }
          }
        }
      }
    },
    "/mock-files/{fileId}/{fileName}": {
      "get": {
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "fileId",
            "required": true
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "fileName",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/mock-files/exports/{fileName}": {
      "get": {
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "fileName",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/v1/report-6406/dictionary/branches": {
      "get": {
        "summary": "Получить список филиалов",
        "tags": [
          "Report 6406 - Dictionary"
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "integer",
                        "minimum": -9007199254740991,
                        "maximum": 9007199254740991,
                        "description": "Идентификатор филиала"
                      },
                      "codeCB": {
                        "type": "string",
                        "description": "Код ЦБ"
                      },
                      "codeDAPP": {
                        "type": "string",
                        "description": "Код DAPP"
                      },
                      "name": {
                        "type": "string",
                        "description": "Название филиала"
                      }
                    },
                    "required": [
                      "id",
                      "codeCB",
                      "codeDAPP",
                      "name"
                    ],
                    "additionalProperties": false
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/report-6406/dictionary/currencies": {
      "get": {
        "summary": "Получить список валют",
        "tags": [
          "Report 6406 - Dictionary"
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CurrencyDto"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/report-6406/dictionary/sources": {
      "get": {
        "summary": "Получить список источников счетов",
        "tags": [
          "Report 6406 - Dictionary"
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/SourceDto"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/report-6406/dictionary/account-masks": {
      "get": {
        "summary": "Получить маски счетов в виде связанного списка",
        "tags": [
          "Report 6406 - Dictionary"
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "firstAccount": {
                        "type": "number"
                      },
                      "secondAccounts": {
                        "type": "array",
                        "items": {
                          "type": "number"
                        }
                      }
                    },
                    "required": [
                      "firstAccount",
                      "secondAccounts"
                    ],
                    "additionalProperties": false
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/report-6406/dictionary/employee/{login}": {
      "get": {
        "summary": "Получить данные о сотруднике по AD-логину",
        "tags": [
          "Report 6406 - Dictionary"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "maxLength": 30,
              "pattern": "^([^А-Яа-я\\,\\s\\:]+)$"
            },
            "in": "path",
            "name": "login",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "fullName": {
                      "type": "string",
                      "maxLength": 50
                    },
                    "login": {
                      "type": "string",
                      "maxLength": 30,
                      "pattern": "^([^А-Яа-я\\,\\s\\:]+)$"
                    }
                  },
                  "required": [
                    "fullName",
                    "login"
                  ],
                  "additionalProperties": false
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/report-6406/tasks": {
      "post": {
        "summary": "Создать новое задание на построение отчёта",
        "tags": [
          "Report 6406 - Tasks"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateTaskDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaskDetailsDto"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Удалить одно или несколько заданий",
        "tags": [
          "Report 6406 - Tasks"
        ],
        "description": "Удаляет задания. Возвращает 200 OK с детальной информацией о результате операции для каждого задания.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "taskIds": {
                    "minItems": 1,
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/UuidSchema"
                    }
                  }
                },
                "required": [
                  "taskIds"
                ],
                "additionalProperties": false
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkDeleteTasksResponseDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/report-6406/tasks/list": {
      "post": {
        "summary": "Получить список заданий (пагинация, сортировка, фильтрация)",
        "tags": [
          "Report 6406 - Tasks"
        ],
        "description": "Тело запроса: pagination (number, size), sorting (direction, column), filter (опционально, объект с заранее определённой структурой). Ответ: items, totalItems. Фильтр — объект с опциональными полями: packageId (UUID или null для заданий без пакета), branchIds (массив UUID), branchName, status, reportType, format, source, createdBy, periodStart (YYYY-MM-DD), periodEnd (YYYY-MM-DD), createdAt (ISO 8601), updatedAt (ISO 8601). Можно комбинировать несколько фильтров одновременно.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GetTasksRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TasksListResponseDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/report-6406/tasks/{id}": {
      "get": {
        "summary": "Получить детальную информацию о задании",
        "tags": [
          "Report 6406 - Tasks"
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UuidSchema"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaskDetailsDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/report-6406/tasks/cancel": {
      "post": {
        "summary": "Отменить одно или несколько заданий",
        "tags": [
          "Report 6406 - Tasks"
        ],
        "description": "Отменяет задания на нашей стороне (переводит в статус «Задание отменено»). Синхронизация с внешней системой может в дальнейшем приводить к статусу KILLED_DAPP. Возвращает 200 OK с детальной информацией о результате операции для каждого задания.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "taskIds": {
                    "minItems": 1,
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/UuidSchema"
                    }
                  }
                },
                "required": [
                  "taskIds"
                ],
                "additionalProperties": false
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkCancelTasksResponseDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/report-6406/tasks/start": {
      "post": {
        "summary": "Запустить задания на выполнение (переводит из статуса created в started)",
        "tags": [
          "Report 6406 - Tasks"
        ],
        "description": "Запускает задания на генерацию отчётов. Проверяет наличие свободного места в хранилище. Поддерживает запуск одного или нескольких заданий.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "taskIds": {
                    "minItems": 1,
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/UuidSchema"
                    }
                  }
                },
                "required": [
                  "taskIds"
                ],
                "additionalProperties": false
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StartTasksResponseDto"
                }
              }
            }
          },
          "507": {
            "description": "Недостаточно места в хранилище",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string"
                    },
                    "title": {
                      "type": "string"
                    },
                    "status": {
                      "type": "integer",
                      "minimum": -9007199254740991,
                      "maximum": 9007199254740991
                    },
                    "detail": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "type",
                    "title",
                    "status",
                    "detail"
                  ],
                  "additionalProperties": false,
                  "description": "Недостаточно места в хранилище"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/report-6406/tasks/{id}/status-history": {
      "get": {
        "summary": "Получить полную историю изменений статусов задания",
        "tags": [
          "Report 6406 - Tasks"
        ],
        "description": "Возвращает полную историю всех изменений статусов задания в виде простого массива (без пагинации)",
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UuidSchema"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StatusHistoryResponseDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/report-6406/tasks/{id}/files": {
      "get": {
        "summary": "Получить список файлов задания",
        "tags": [
          "Report 6406 - Tasks"
        ],
        "description": "Возвращает список файлов с pre-signed URLs для скачивания. URLs генерируются автоматически для файлов в статусе COMPLETED.",
        "parameters": [
          {
            "schema": {
              "default": 1,
              "type": "integer",
              "minimum": 1,
              "maximum": 9007199254740991
            },
            "in": "query",
            "name": "number",
            "required": true,
            "description": "Номер страницы (начиная с 1)"
          },
          {
            "schema": {
              "default": 20,
              "type": "integer",
              "minimum": 1,
              "maximum": 100
            },
            "in": "query",
            "name": "size",
            "required": true,
            "description": "Размер страницы"
          },
          {
            "schema": {
              "default": "status",
              "type": "string",
              "enum": [
                "status",
                "fileName",
                "fileSize",
                "createdAt"
              ]
            },
            "in": "query",
            "name": "sortBy",
            "required": true
          },
          {
            "schema": {
              "$ref": "#/components/schemas/SortOrderEnum"
            },
            "in": "query",
            "name": "sortOrder",
            "required": true,
            "description": "Направление сортировки"
          },
          {
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "PENDING",
                  "CONVERTING",
                  "COMPLETED",
                  "FAILED"
                ]
              }
            },
            "in": "query",
            "name": "status",
            "required": false
          },
          {
            "schema": {
              "$ref": "#/components/schemas/UuidSchema"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaskFilesResponseDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/report-6406/tasks/{taskId}/files/{fileId}/retry": {
      "post": {
        "summary": "⚠️ [Экспериментальный] Повторить конвертацию файла с ошибкой",
        "tags": [
          "Report 6406 - Tasks"
        ],
        "description": "Экспериментальная функция для повтора конвертации файлов. В текущей версии возвращает 501 Not Implemented.",
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UuidSchema"
            },
            "in": "path",
            "name": "taskId",
            "required": true
          },
          {
            "schema": {
              "$ref": "#/components/schemas/UuidSchema"
            },
            "in": "path",
            "name": "fileId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RetryFileConversionResponseDto"
                }
              }
            }
          },
          "501": {
            "description": "Функциональность ещё не реализована",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string"
                    },
                    "title": {
                      "type": "string"
                    },
                    "status": {
                      "type": "integer",
                      "minimum": -9007199254740991,
                      "maximum": 9007199254740991
                    },
                    "detail": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "type",
                    "title",
                    "status",
                    "detail"
                  ],
                  "additionalProperties": false,
                  "description": "Функциональность ещё не реализована"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/report-6406/tasks/export": {
      "post": {
        "summary": "Выгрузить реестр отчётов в CSV формате",
        "tags": [
          "Report 6406 - Tasks"
        ],
        "description": "Создаёт CSV файл со списком заданий согласно фильтрам. Возвращает ссылку на скачивание файла.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ExportTasksRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExportTasksResponseDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/report-6406/packages": {
      "post": {
        "summary": "Создать новый пакет",
        "tags": [
          "Report 6406 - Packages"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePackageDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PackageDto"
                }
              }
            }
          }
        }
      },
      "get": {
        "summary": "Получить список пакетов с пагинацией",
        "tags": [
          "Report 6406 - Packages"
        ],
        "parameters": [
          {
            "schema": {
              "default": 1,
              "type": "integer",
              "minimum": 1,
              "maximum": 9007199254740991
            },
            "in": "query",
            "name": "number",
            "required": true,
            "description": "Номер страницы (начиная с 1)"
          },
          {
            "schema": {
              "default": 20,
              "type": "integer",
              "minimum": 1,
              "maximum": 100
            },
            "in": "query",
            "name": "size",
            "required": true,
            "description": "Размер страницы"
          },
          {
            "schema": {
              "default": "createdAt",
              "type": "string",
              "enum": [
                "createdAt",
                "name",
                "tasksCount",
                "totalSize"
              ]
            },
            "in": "query",
            "name": "sortBy",
            "required": true
          },
          {
            "schema": {
              "$ref": "#/components/schemas/SortOrderEnum"
            },
            "in": "query",
            "name": "sortOrder",
            "required": true,
            "description": "Направление сортировки"
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "query",
            "name": "search",
            "required": false
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PackagesListResponseDto"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Удалить один или несколько пакетов",
        "tags": [
          "Report 6406 - Packages"
        ],
        "description": "Удаляет пакеты. Возвращает 200 OK с детальной информацией о результате операции для каждого пакета.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "packageIds": {
                    "minItems": 1,
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/UuidSchema"
                    }
                  }
                },
                "required": [
                  "packageIds"
                ],
                "additionalProperties": false
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkDeletePackagesResponseDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/report-6406/packages/{id}": {
      "get": {
        "summary": "Получить детальную информацию о пакете",
        "tags": [
          "Report 6406 - Packages"
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UuidSchema"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PackageDto"
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Обновить название пакета",
        "tags": [
          "Report 6406 - Packages"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdatePackageDto"
              }
            }
          }
        },
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UuidSchema"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdatePackageResponseDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/report-6406/packages/{packageId}/tasks": {
      "post": {
        "summary": "Добавить задания в пакет",
        "tags": [
          "Report 6406 - Packages"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "taskIds": {
                    "minItems": 1,
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/UuidSchema"
                    }
                  }
                },
                "required": [
                  "taskIds"
                ],
                "additionalProperties": false
              }
            }
          },
          "required": true
        },
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UuidSchema"
            },
            "in": "path",
            "name": "packageId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AddTasksToPackageResponseDto"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Удалить одно или несколько заданий из пакета",
        "tags": [
          "Report 6406 - Packages"
        ],
        "description": "Удаляет задания из пакета. Возвращает 200 OK с детальной информацией о результате операции для каждого задания.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "taskIds": {
                    "minItems": 1,
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/UuidSchema"
                    }
                  }
                },
                "required": [
                  "taskIds"
                ],
                "additionalProperties": false
              }
            }
          },
          "required": true
        },
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UuidSchema"
            },
            "in": "path",
            "name": "packageId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkRemoveTasksResponseDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/report-6406/packages/{packageId}/copy-to-tfr": {
      "post": {
        "summary": "Скопировать пакет в ТФР",
        "tags": [
          "Report 6406 - Packages"
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UuidSchema"
            },
            "in": "path",
            "name": "packageId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CopyToTfrResponseDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/report-6406/storage/volume": {
      "get": {
        "summary": "Получить объём хранилищ",
        "tags": [
          "Report 6406 - Storage"
        ],
        "description": "Возвращает массив сущностей по одному на каждое хранилище (корзина 1, корзина 2, ТФР). Каждый элемент содержит id, name, code, totalHuman, freeHuman, percent для отображения и key в JSX.",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StorageVolumeListResponseDto"
                }
              }
            }
          }
        }
      }
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000",
      "description": "Development server"
    },
    {
      "url": "https://api-stage.example.com",
      "description": "Staging server"
    },
    {
      "url": "https://api.example.com",
      "description": "Production server"
    }
  ],
  "tags": [
    {
      "name": "Health",
      "description": "Health check endpoints"
    },
    {
      "name": "Report 6406 - Dictionary",
      "description": "Справочники для формы отчётности 6406"
    },
    {
      "name": "Report 6406 - Tasks",
      "description": "Задания на построение отчётов для формы 6406"
    },
    {
      "name": "Report 6406 - Packages",
      "description": "Пакеты заданий для формы 6406"
    },
    {
      "name": "Report 6406 - Storage",
      "description": "Мониторинг хранилища отчётов"
    }
  ]
}