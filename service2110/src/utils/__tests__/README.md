# Unit тесты для утилит

Этот каталог содержит unit тесты для утилитарных функций проекта.

## Запуск тестов

```bash
# Запустить все тесты
npm test

# Запустить тесты один раз
npm run test:run

# Запустить тесты в watch режиме
npm run test:watch

# Запустить тесты с покрытием
npm run test:coverage
```

## Структура тестов

### `file-size-formatter.test.ts`

Тесты для утилит форматирования размеров файлов:

- ✅ `formatBytes()` - форматирование размеров в человекочитаемый вид
- ✅ `formatBytesFixed()` - форматирование с фиксированной точностью
- ✅ `parseBytes()` - парсинг строк с размерами обратно в байты
- ✅ Интеграционные тесты (обратимость операций)
- ✅ Граничные случаи и валидация

## Покрытие тестами

Утилиты форматирования размеров полностью покрыты тестами:

- Все основные функции
- Граничные случаи (0, очень большие числа)
- Различные единицы измерения (Bytes, KB, MB, GB, TB, PB)
- Обработка ошибок
- Обратимость операций форматирования/парсинга

## Добавление новых тестов

При добавлении новых утилит следуйте этой структуре:

```typescript
import { describe, it, expect } from 'vitest';
import { yourFunction } from '../your-util';

describe('your-util', () => {
  describe('yourFunction', () => {
    it('должен правильно обрабатывать нормальные случаи', () => {
      expect(yourFunction(input)).toBe(expectedOutput);
    });

    it('должен обрабатывать граничные случаи', () => {
      expect(yourFunction(0)).toBe(expectedOutput);
    });

    it('должен выбрасывать ошибку для некорректного ввода', () => {
      expect(() => yourFunction(invalidInput)).toThrow();
    });
  });
});
```

## Связанные документы

- [Соглашения по работе с размерами файлов](../../../../docs/conventions/file-size-conventions.md)
- [TASK-008: Стандартизация хранения и передачи размеров](../../../../docs/tasks/TASK-008-standardize-size-storage-and-api.md)
