# Правила для Cursor AI

## Экспорты
- Всегда используй именованные экспорты (named exports) вместо экспорта по умолчанию (default exports)
- Используй `export { ... }` или `export const/function/class ...` вместо `export default`
- При импорте используй деструктуризацию: `import { something } from './module'` вместо `import something from './module'`

## Зависимости
- Все npm-зависимости устанавливай только как devDependencies с флагами `-ED`, например: `npm i lodash -ED`

## Коммиты
- Описание коммита должно начинаться с номера задачи в формате Jira (например, `VTB-1234`), затем через пробел — краткое описание изменений на русском языке

## Работа с заданиями

### Структура заданий
- Все задания хранятся в папке `docs/tasks/`
- Каждое задание оформляется в отдельном Markdown файле с именем `TASK-XXX-краткое-описание.md`
- Нумерация заданий: `TASK-001`, `TASK-002`, и т.д.

### Формат задания
Каждое задание должно содержать:
- **Статус**: текущий статус выполнения (⏳ В работе, ✅ Выполнено, ❌ Отменено)
- **Описание**: краткое описание задачи
- **Цели**: список основных целей задания
- **Детальное описание**: подробное описание всех шагов и требований
- **Критерии приёмки**: чек-лист для проверки выполнения
- **Ветка**: название git-ветки для выполнения задания
- **Порядок выполнения**: пошаговая инструкция
- **Уточнения в процессе выполнения**: секция для добавления уточнений, которые выяснились в процессе работы

### Манифест заданий
- Файл `docs/tasks/tasks-manifest.json` содержит список всех заданий
- Для каждого задания указывается:
  - `id`: уникальный идентификатор (например, "TASK-001")
  - `title`: краткое название
  - `file`: путь к файлу с заданием
  - `status`: статус ("pending", "in-progress", "completed", "cancelled")
  - `createdDate`: дата создания (ISO 8601)
  - `completedDate`: дата завершения (ISO 8601) или `null`
  - `branch`: название git-ветки

### Рабочий процесс
1. **Создание задания**: создать файл задания и добавить запись в манифест со статусом "pending"
2. **Начало работы**: 
   - Создать ветку `feature/TASK-XXX-краткое-название`
   - Изменить статус на "in-progress" в манифесте
3. **Выполнение**: 
   - Работать в созданной ветке
   - Добавлять уточнения в секцию "Уточнения в процессе выполнения" в файле задания
4. **Завершение работы над заданием**:
   - Создать коммит с префиксом `TASK-XXX описание изменений`
   - **НЕ обновлять** автоматически манифест и статус задания
5. **Приёмка задания** (выполняется пользователем):
   - После завершения работы **обязательно спросить у пользователя**: "Задание выполнено. Принимаете работу?"
   - Если пользователь **принимает** задание:
     - Обновить статус на "completed" в `docs/tasks/tasks-manifest.json`
     - Указать `completedDate` с текущей датой и временем в формате ISO 8601
     - Подтвердить успешное обновление манифеста
   - Если пользователь **не принимает** задание:
     - Запросить уточнения: "Что нужно доработать?"
     - Продолжить работу над заданием согласно полученным комментариям
     - Добавить уточнения в секцию "Уточнения в процессе выполнения"
     - Повторить процесс приёмки после доработок

### Важно о приёмке заданий
- **ВСЕГДА** спрашивай пользователя о приёмке задания после завершения работы
- **НИКОГДА** не обновляй статус на "completed" в манифесте без явного подтверждения пользователя
- Решение о принятии задания принимает **только пользователь**
- Манифест обновляется **только после** одобрения пользователем

### Пример записи в манифесте
```json
{
  "id": "TASK-001",
  "title": "Инициализация репозитория",
  "file": "docs/tasks/TASK-001-init-repository.md",
  "status": "completed",
  "createdDate": "2026-01-27T12:00:00Z",
  "completedDate": "2026-01-27T14:30:00Z",
  "branch": "feature/TASK-001-init-repository"
}
```
