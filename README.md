# Service2110

Backend —Å–µ—Ä–≤–∏—Å –Ω–∞ —Å—Ç–µ–∫–µ Fastify + TypeScript + PostgreSQL + Drizzle ORM.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
/
‚îú‚îÄ‚îÄ service2110/        # Service2110 (Fastify + TypeScript)
‚îú‚îÄ‚îÄ taskViewerBe/       # Task Viewer Backend (–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç)
‚îú‚îÄ‚îÄ taskViewerFe/       # Task Viewer Frontend (–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç)
‚îú‚îÄ‚îÄ docs/               # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –∑–∞–¥–∞—á–∏
‚îÇ   ‚îî‚îÄ‚îÄ tasks/         # –ó–∞–¥–∞—á–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ TASK-XXX
‚îú‚îÄ‚îÄ package.json       # –ö–æ—Ä–Ω–µ–≤–æ–π package.json —Å workspace
‚îî‚îÄ‚îÄ README.md          # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js >= 20
- Docker –∏ docker-compose
- npm

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

### 2. –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–ë–î –≤ Docker + Service2110 –ª–æ–∫–∞–ª—å–Ω–æ** ‚≠ê

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL –≤ Docker
npm run docker:db:up

# –ó–∞–ø—É—Å—Ç–∏—Ç—å Service2110 (Backend) —Å hot-reload
npm run dev
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π hot-reload –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞
- ‚úÖ –£–¥–æ–±–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞
- ‚úÖ –õ–æ–≥–∏ —Å—Ä–∞–∑—É –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ Service2110 –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω:

- **API**: http://localhost:3000
- **Swagger UI**: http://localhost:3000/docs
- **Health Check**: http://localhost:3000/health

## –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### Service2110 (Backend) –∫–æ–º–∞–Ω–¥—ã

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
npm run dev                 # –ó–∞–ø—É—Å–∫ –≤ dev —Ä–µ–∂–∏–º–µ —Å hot-reload
npm run build               # –°–±–æ—Ä–∫–∞ TypeScript
npm run lint                # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ ESLint
npm run lint:fix            # –ê–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ESLint

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
npm run db:generate         # –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
npm run db:push             # –ë—ã—Å—Ç—Ä–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π (dev)
npm run db:seed             # –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
npm run db:studio           # –û—Ç–∫—Ä—ã—Ç—å Drizzle Studio
```

### Docker –∫–æ–º–∞–Ω–¥—ã

```bash
# PostgreSQL
npm run docker:db:up        # –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL
npm run docker:db:down      # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PostgreSQL
```

### Task Viewer (–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç)

```bash
npm run taskViewer:dev      # –ó–∞–ø—É—Å—Ç–∏—Ç—å Task Viewer (BE + FE)
```

## –í–∞—Ä–∏–∞–Ω—Ç—ã –∑–∞–ø—É—Å–∫–∞ (–ø–æ–¥—Ä–æ–±–Ω–æ)

### üîß –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (Development)

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–± –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL:
   ```bash
   npm run docker:db:up
   ```

2. –ó–∞–ø—É—Å—Ç–∏—Ç—å Service2110 –ª–æ–∫–∞–ª—å–Ω–æ:
   ```bash
   npm run dev
   ```

3. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:
   ```bash
   npm run db:push
   ```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- PostgreSQL —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ `be_postgres`
- Service2110 –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ `tsx watch` —Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `.ts` —Ñ–∞–π–ª–æ–≤ —Å–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- –ë–î –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ `localhost:5432`
- API –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `localhost:3000`

**–û—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Service2110: Ctrl+C –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PostgreSQL:
npm run docker:db:down
```

---

## API Endpoints

### Health Check
- `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –ë–î

### Items (–ø—Ä–∏–º–µ—Ä—ã CRUD)
- `GET /api/v1/items` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã
- `GET /api/v1/items/:id` - –ü–æ–ª—É—á–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç –ø–æ ID
- `POST /api/v1/items` - –°–æ–∑–¥–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç
- `PATCH /api/v1/items/:id` - –û–±–Ω–æ–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç
- `DELETE /api/v1/items/:id` - –£–¥–∞–ª–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `GET /docs` - Swagger UI (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- `GET /docs/json` - Swagger JSON —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

## –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

### –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

1. –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ö–µ–º—É –≤ `service2110/src/db/schema/`
2. –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é:
   ```bash
   npm run db:generate
   ```
3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è (–±—ã—Å—Ç—Ä–æ, –¥–ª—è dev):
   ```bash
   npm run db:push
   ```

### –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤

–ó–∞–ø–æ–ª–Ω–∏—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

```bash
npm run db:seed
```

### Drizzle Studio

–í–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

```bash
npm run db:studio
```

–û—Ç–∫—Ä–æ–µ—Ç—Å—è –ø–æ –∞–¥—Ä–µ—Å—É: https://local.drizzle.studio

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

Service2110 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–∞–π–ª `service2110/.env`. –ü—Ä–∏–º–µ—Ä –≤ `service2110/.env.example`:

```env
# Application
NODE_ENV=development
PORT=3000
HOST=0.0.0.0

# Database
DB_HOST=localhost        # –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
# DB_HOST=postgres       # –¥–ª—è Docker —Ä–µ–∂–∏–º–∞
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=app_db
```

**–í–∞–∂–Ω–æ:** –ü—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–º –∑–∞–ø—É—Å–∫–µ Service2110 –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `DB_HOST=localhost`.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Service2110

```
service2110/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ config/         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (env –≤–∞–ª–∏–¥–∞—Ü–∏—è)
‚îÇ   ‚îú‚îÄ‚îÄ db/            # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schema/    # Drizzle —Å—Ö–µ–º—ã —Ç–∞–±–ª–∏—Ü
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ migrations/# SQL –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ seed.ts    # –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts   # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ routes/        # API –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ v1/        # API v1
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ report-6406/  # –§–æ—Ä–º–∞ –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç–∏ 6406
‚îÇ   ‚îú‚îÄ‚îÄ services/      # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ report-6406/
‚îÇ   ‚îú‚îÄ‚îÄ schemas/       # Zod —Å—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ report-6406/
‚îÇ   ‚îú‚îÄ‚îÄ plugins/       # Fastify –ø–ª–∞–≥–∏–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ app.ts         # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Fastify
‚îÇ   ‚îî‚îÄ‚îÄ server.ts      # Entry point
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îî‚îÄ‚îÄ swagger/       # Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è)
‚îú‚îÄ‚îÄ Dockerfile         # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ docker-compose.yml # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ tsconfig.json      # TypeScript –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ eslint.config.mjs  # ESLint –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ drizzle.config.ts  # Drizzle ORM –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ README.md          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Runtime**: Node.js 20
- **Framework**: Fastify
- **Language**: TypeScript
- **Validation**: Zod
- **Database**: PostgreSQL 16
- **ORM**: Drizzle ORM
- **API Docs**: Swagger (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑ Zod)
- **Linter**: ESLint
- **Containerization**: Docker, docker-compose

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ TypeScript —Å —Å—Ç—Ä–æ–≥–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Zod —Å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Ç–∏–ø–æ–≤
- ‚úÖ Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∏–∑ Zod —Å—Ö–µ–º
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è localhost
- ‚úÖ Graceful shutdown
- ‚úÖ Health check endpoint —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ë–î
- ‚úÖ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API (v1)
- ‚úÖ RFC 7807 Problem Details –¥–ª—è –æ—à–∏–±–æ–∫
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤ –≤ dev —Ä–µ–∂–∏–º–µ (pino-pretty)
- ‚úÖ Hot-reload –≤ dev —Ä–µ–∂–∏–º–µ (tsx watch)
- ‚úÖ Docker –∏ docker-compose –¥–ª—è –∑–∞–ø—É—Å–∫–∞

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ endpoint

1. –°–æ–∑–¥–∞—Ç—å Zod —Å—Ö–µ–º—É –≤ `be/src/schemas/`
2. –°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å –≤ `be/src/services/`
3. –°–æ–∑–¥–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç –≤ `be/src/routes/`
4. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç –≤ `be/src/routes/index.ts`
5. Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã

1. –°–æ–∑–¥–∞—Ç—å —Å—Ö–µ–º—É –≤ `be/src/db/schema/`
2. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑ `be/src/db/schema/index.ts`
3. –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é: `npm run be:db:generate`
4. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é: `npm run be:db:migrate`

## Troubleshooting

### –ü–æ—Ä—Ç 3000 –∑–∞–Ω—è—Ç

```bash
# Windows
netstat -ano | findstr :3000
taskkill //F //PID <PID>

# Linux/Mac
lsof -i :3000
kill -9 <PID>
```

### PostgreSQL –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
npm run docker:down

# –£–¥–∞–ª–∏—Ç—å volumes (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ, —É–¥–∞–ª–∏—Ç –¥–∞–Ω–Ω—ã–µ!)
cd be && docker-compose down -v

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ
npm run docker:db:up
```

### Health check –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 503

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω:
```bash
npm run docker:db:up
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ `be/.env` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `DB_HOST`:
- –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞: `DB_HOST=localhost`
- –î–ª—è Docker —Ä–µ–∂–∏–º–∞: `DB_HOST=postgres`

## –ó–∞–¥–∞—á–∏

–í—Å–µ –∑–∞–¥–∞—á–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ `docs/tasks/` –≤ —Ñ–æ—Ä–º–∞—Ç–µ `TASK-XXX-–æ–ø–∏—Å–∞–Ω–∏–µ.md`.

–ú–∞–Ω–∏—Ñ–µ—Å—Ç –∑–∞–¥–∞—á: `docs/tasks/tasks-manifest.json`

## –õ–∏—Ü–µ–Ω–∑–∏—è

ISC
