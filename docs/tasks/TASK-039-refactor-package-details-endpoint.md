# TASK-039: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ endpoint –ø–æ–ª—É—á–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π –ø–∞–∫–µ—Ç–∞

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ (Backend)  
**–í–µ—Ç–∫–∞**: `feature/TASK-039-refactor-package-details-endpoint`

---

## –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ endpoint `/api/v1/report-6406/packages/:id`: —É–±—Ä–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –ø–µ—Ä–µ—Å—Ç–∞—Ç—å –æ—Ç–¥–∞–≤–∞—Ç—å `tasks` –∏ `tasksPagination`, —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å DTO. –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–æ–≤ –∑–∞–¥–∞—á –ø–∞–∫–µ—Ç–∞.

---

## –ò—Å—Ö–æ–¥–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏

> –î–∞–Ω–Ω—ã–π —Ä–∞–∑–¥–µ–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –¥–ª—è –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏—è.

**–ò—Å—Ç–æ—á–Ω–∏–∫:** [–ó–∞–º–µ—Ç–∫–∏ –æ—Ç 05.02.2026](../temp-private-2110/docs/notes/2026-02-05.md#–ø–æ–ª—É—á–µ–Ω–∏–µ-–¥–µ—Ç–∞–ª–µ–π-–ø–∞–∫–µ—Ç–∞-—Ç–∞—Ä–∞—Å)

```
`'/api/v1/report-6406/packages/:id'` - –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —É–±–∏—Ä–∞–µ–º, –∏ –ø–µ—Ä–µ—Å—Ç–∞—ë–º –æ—Ç–¥–∞–≤–∞—Ç—å `tasks`, `tasksPagination`

–¢–µ–º —Å–∞–º—ã–º `PackageDto` –∏ `PackageDetailDto` —Å—Ç–∞–Ω—É—Ç —Ä–∞–≤–Ω—ã –∏ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `PackageDto`.

–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –≤—Ö–æ–¥—è—â–∏—Ö –≤ –ø–∞–∫–µ—Ç.
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –≤ –ø–∞–∫–µ—Ç–µ.

`'/api/v1/report-6406/packages/:id/includedTasks'` - –ø–æ–¥ –≤–æ–ø—Ä–æ—Å–æ–º, —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–∏–Ω–∏–º–∞—é—Ç BE
`'/api/v1/report-6406/packages/:id/excludedTasks'` - –ø–æ–¥ –≤–æ–ø—Ä–æ—Å–æ–º, —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–∏–Ω–∏–º–∞—é—Ç BE

–ù—É–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å —á—Ç–æ —ç—Ç–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã —Ä–∞—Å—à–∏—Ä—è—Ç—å –Ω–∞–±–æ—Ä —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤ `/api/v1/report-6406/tasks/list`.

–°–µ–≥–æ–¥–Ω—è –¥–µ–ª–∞–µ–º —Ç–∞–∫:
–í `/api/v1/report-6406/tasks/list` –¥–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `includedInPacket` –∏ `excludedInPacket`.
```

---

## –¶–µ–ª–∏

- –£–ø—Ä–æ—Å—Ç–∏—Ç—å endpoint –ø–æ–ª—É—á–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π –ø–∞–∫–µ—Ç–∞
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å DTO (–æ–±—ä–µ–¥–∏–Ω–∏—Ç—å `PackageDto` –∏ `PackageDetailDto`)
- –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –∑–∞–¥–∞—á –ø–æ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –∫ –ø–∞–∫–µ—Ç—É
- –û–±–µ—Å–ø–µ—á–∏—Ç—å —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä–æ–≤ –¥–ª—è —Å–ø–∏—Å–∫–æ–≤ –∑–∞–¥–∞—á –ø–∞–∫–µ—Ç–∞

---

## –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

### –ö–æ–Ω—Ç–µ–∫—Å—Ç

–¢–µ–∫—É—â–∏–π endpoint `/api/v1/report-6406/packages/:id` –∏–º–µ–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞–¥–∞—á–∏ –ø–∞–∫–µ—Ç–∞. –≠—Ç–æ —É—Å–ª–æ–∂–Ω—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

#### 1. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ endpoint

**Endpoint:** `GET /api/v1/report-6406/packages/:id`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –£–±—Ä–∞—Ç—å –≤—Å–µ query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- –£–±—Ä–∞—Ç—å –ø–æ–ª—è `tasks` –∏ `tasksPagination` –∏–∑ response
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—ã–π `PackageDto` –≤–º–µ—Å—Ç–æ `PackageDetailDto`

**Response (—É–ø—Ä–æ—â—ë–Ω–Ω—ã–π):**
```json
{
  "id": "uuid",
  "name": "–ù–∞–∑–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–∞",
  "status": "created",
  "createdAt": "2026-02-05T10:00:00Z",
  "createdBy": "user.login",
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –±–µ–∑ tasks –∏ tasksPagination
}
```

#### 2. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á –ø–æ –ø–∞–∫–µ—Ç—É

**Endpoint:** `POST /api/v1/report-6406/tasks/list`

**–ù–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ Request Body:**
```json
{
  "pagination": {...},
  "sorting": {...},
  "filter": [...],
  "includedInPacket": "uuid-–ø–∞–∫–µ—Ç–∞",  // –ù–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
  "excludedInPacket": "uuid-–ø–∞–∫–µ—Ç–∞"   // –ù–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
}
```

**–õ–æ–≥–∏–∫–∞:**
- `includedInPacket` - –≤–µ—Ä–Ω—É—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞–¥–∞—á–∏, –≤—Ö–æ–¥—è—â–∏–µ –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–∞–∫–µ—Ç
- `excludedInPacket` - –≤–µ—Ä–Ω—É—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞–¥–∞—á–∏, –ù–ï –≤—Ö–æ–¥—è—â–∏–µ –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–∞–∫–µ—Ç
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–∞—é—â–∏–µ (–Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç (–ø–æ–¥ –≤–æ–ø—Ä–æ—Å–æ–º):**
- `GET /api/v1/report-6406/packages/:id/includedTasks` - –∑–∞–¥–∞—á–∏ –ø–∞–∫–µ—Ç–∞
- `GET /api/v1/report-6406/packages/:id/excludedTasks` - –∑–∞–¥–∞—á–∏ –Ω–µ –≤ –ø–∞–∫–µ—Ç–µ

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç–æ:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤–∞—Ä–∏–∞–Ω—Ç —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ `includedInPacket` –∏ `excludedInPacket` –≤ `POST /api/v1/report-6406/tasks/list`. –û—Ç–¥–µ–ª—å–Ω—ã–µ endpoints `/includedTasks` –∏ `/excludedTasks` –Ω–µ —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å, —Ç–∞–∫ –∫–∞–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π endpoint `/tasks/list` —É–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã, –ø–∞–≥–∏–Ω–∞—Ü–∏—é –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É.

#### 3. –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä–æ–≤

–ù–æ–≤—ã–µ endpoints –∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ–ª–∂–Ω—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `/api/v1/report-6406/tasks/list`:
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã

---

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

### –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ endpoint
- [x] –£–±—Ä–∞–Ω—ã –≤—Å–µ query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ `GET /api/v1/report-6406/packages/:id`
- [x] –£–±—Ä–∞–Ω—ã –ø–æ–ª—è `tasks` –∏ `tasksPagination` –∏–∑ response
- [x] `PackageDto` –∏ `PackageDetailDto` –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤ –æ–¥–∏–Ω `PackageDto`
- [x] –£–¥–∞–ª—ë–Ω `PackageDetailDto` –∏–∑ –∫–æ–¥–∞
- [x] –û–±–Ω–æ–≤–ª–µ–Ω–∞ OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
- [x] –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –º–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è endpoint –Ω–∞ Backend

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á –ø–æ –ø–∞–∫–µ—Ç—É
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `includedInPacket` –∏ `excludedInPacket` –≤ `/api/v1/report-6406/tasks/list`
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∑–∞–¥–∞—á –ø–æ –ø–∞–∫–µ—Ç—É
- [x] –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–∞—é—â–∏–µ (–≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ `refine` –≤ Zod —Å—Ö–µ–º–µ)
- [x] –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã, –ø–∞–≥–∏–Ω–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- [x] –û–±–Ω–æ–≤–ª–µ–Ω–∞ OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã unit-—Ç–µ—Å—Ç—ã (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞)

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç (–Ω–µ –≤—ã–±—Ä–∞–Ω)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã endpoints `/api/v1/report-6406/packages/:id/includedTasks` –∏ `/excludedTasks`
- [ ] Endpoints –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã –∏–∑ `/api/v1/report-6406/tasks/list`
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∞ OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã unit-—Ç–µ—Å—Ç—ã

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –Ω–µ –±—ã–ª —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω, —Ç–∞–∫ –∫–∞–∫ –≤—ã–±—Ä–∞–Ω –≤–∞—Ä–∏–∞–Ω—Ç —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π endpoint `/tasks/list`.

### –û–±—â–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏
- [x] –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã (–∫–æ–º–ø–∏–ª—è—Ü–∏—è TypeScript —É—Å–ø–µ—à–Ω–∞)
- [x] –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç—Ä–µ–±—É—é—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Frontend (—Å–º. —Ä–∞–∑–¥–µ–ª "–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ Frontend")
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ (OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è, —Å—Ö–µ–º—ã)

---

## –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

1. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É `PackageDto` –∏ `PackageDetailDto`
2. –û–±—ä–µ–¥–∏–Ω–∏—Ç—å DTO –≤ –æ–¥–∏–Ω `PackageDto`
3. –£–ø—Ä–æ—Å—Ç–∏—Ç—å endpoint `GET /api/v1/report-6406/packages/:id`
4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –∑–∞–¥–∞—á –ø–æ –ø–∞–∫–µ—Ç—É (–≤—ã–±—Ä–∞—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
5. –û–±–Ω–æ–≤–∏—Ç—å OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é
6. –ù–∞–ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã
7. –û–±–Ω–æ–≤–∏—Ç—å Frontend (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
8. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [–ó–∞–º–µ—Ç–∫–∏ –æ—Ç 05.02.2026](../temp-private-2110/docs/notes/2026-02-05.md)
- TASK-013: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏–π –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –ø–∞–∫–µ—Ç

---

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –í—ã–±—Ä–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

**–í–∞—Ä–∏–∞–Ω—Ç:** –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ `includedInPacket` –∏ `excludedInPacket` –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π endpoint `POST /api/v1/report-6406/tasks/list`

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π endpoint —É–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã, –ø–∞–≥–∏–Ω–∞—Ü–∏—é –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ endpoints, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
- –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å –≤ –±—É–¥—É—â–µ–º

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –Ω–µ –≤—ã–±—Ä–∞–Ω:**
- –û—Ç–¥–µ–ª—å–Ω—ã–µ endpoints `/api/v1/report-6406/packages/:id/includedTasks` –∏ `/excludedTasks` –Ω–µ —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å
- –ü—Ä–∏—á–∏–Ω–∞: –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ endpoint

### –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

#### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

1. **`includedInPacket`** (UUID –ø–∞–∫–µ—Ç–∞):
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç SQL –ø–æ–¥–∑–∞–ø—Ä–æ—Å —Å `EXISTS`:
   ```sql
   EXISTS (
     SELECT 1 FROM report_6406_package_tasks
     WHERE task_id = report_6406_tasks.id
       AND package_id = :includedInPacket
   )
   ```

2. **`excludedInPacket`** (UUID –ø–∞–∫–µ—Ç–∞):
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç SQL –ø–æ–¥–∑–∞–ø—Ä–æ—Å —Å `NOT EXISTS`:
   ```sql
   NOT EXISTS (
     SELECT 1 FROM report_6406_package_tasks
     WHERE task_id = report_6406_tasks.id
       AND package_id = :excludedInPacket
   )
   ```

3. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**
   - –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω `includedInPacket` –∏–ª–∏ `excludedInPacket`, —Ç–æ `filter.packageId` –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è
   - –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —è–≤–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ –ø–∞–∫–µ—Ç—É

#### –í–∞–ª–∏–¥–∞—Ü–∏—è

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã `includedInPacket` –∏ `excludedInPacket` –≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–∞—é—â–∏–µ. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ Zod `refine`:

```typescript
.refine(
  (data) => {
    if (data.includedInPacket && data.excludedInPacket) {
      return false;
    }
    return true;
  },
  {
    message: 'includedInPacket and excludedInPacket cannot be used together',
    path: ['includedInPacket'],
  }
)
```

---

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### Backend (‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ)

#### 1. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ endpoint –ø–æ–ª—É—á–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π –ø–∞–∫–µ—Ç–∞
- **–§–∞–π–ª:** `service2110/src/routes/v1/report-6406/packages/index.ts`
- –£–±—Ä–∞–Ω—ã –≤—Å–µ query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (`tasksNumber`, `tasksSize`, `tasksSortBy`, `tasksSortOrder`) –∏–∑ `GET /api/v1/report-6406/packages/:id`
- –£–±—Ä–∞–Ω—ã –ø–æ–ª—è `tasks` –∏ `tasksPagination` –∏–∑ response
- Endpoint —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ `PackageDto` –±–µ–∑ –∑–∞–¥–∞—á

#### 2. –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è DTO
- **–§–∞–π–ª—ã:** 
  - `service2110/src/schemas/report-6406/packages.schema.ts`
  - `service2110/src/schemas/openapi-components.ts`
  - `service2110/src/schemas/schema-registry.ts`
- –£–¥–∞–ª–µ–Ω—ã —Å—Ö–µ–º—ã: `packageDetailSchema`, `packageTaskItemSchema`, `packageTasksQuerySchema`
- –£–¥–∞–ª–µ–Ω—ã —Ç–∏–ø—ã: `PackageDetail`, `PackageTaskItem`, `PackageTasksQuery`
- –û–±—ä–µ–¥–∏–Ω–µ–Ω—ã `PackageDto` –∏ `PackageDetailDto` –≤ –æ–¥–∏–Ω `PackageDto`
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å—Ö–µ–º

#### 3. –£–ø—Ä–æ—â–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –ø–∞–∫–µ—Ç–æ–≤
- **–§–∞–π–ª:** `service2110/src/services/report-6406/packages.service.ts`
- –ú–µ—Ç–æ–¥ `getPackageById()` —É–ø—Ä–æ—â—ë–Ω: —É–±—Ä–∞–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `tasksQuery`, —É–±—Ä–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–¥–∞—á
- –ú–µ—Ç–æ–¥ —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–∞–∫–µ—Ç–µ
- –£–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã (`getStatusPermissions`, `TaskStatus`, `report6406Tasks`, `report6406TaskBranches`, `branches`)

#### 4. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á –ø–æ –ø–∞–∫–µ—Ç—É
- **–§–∞–π–ª—ã:**
  - `service2110/src/schemas/report-6406/tasks.schema.ts`
  - `service2110/src/services/report-6406/tasks.service.ts`
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `includedInPacket` –∏ `excludedInPacket` –≤ —Å—Ö–µ–º—É `getTasksRequestSchema`
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–∞—é—â–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —á–µ—Ä–µ–∑ `refine`
- –û–±–Ω–æ–≤–ª—ë–Ω –º–µ—Ç–æ–¥ `buildFilterConditions()` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:
  - `includedInPacket` - —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –∑–∞–¥–∞—á–∏, –≤—Ö–æ–¥—è—â–∏–µ –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–∞–∫–µ—Ç (—á–µ—Ä–µ–∑ `EXISTS` –ø–æ–¥–∑–∞–ø—Ä–æ—Å)
  - `excludedInPacket` - —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –∑–∞–¥–∞—á–∏, –ù–ï –≤—Ö–æ–¥—è—â–∏–µ –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–∞–∫–µ—Ç (—á–µ—Ä–µ–∑ `NOT EXISTS` –ø–æ–¥–∑–∞–ø—Ä–æ—Å)
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–º–µ—é—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ `filter.packageId` (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω—ã, —Ç–æ `filter.packageId` –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è)

#### 5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –£–¥–∞–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ `PackageDetailDto` –∏–∑ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –°—Ö–µ–º—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤—è—Ç—Å—è –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **–ò–∑–º–µ–Ω–µ–Ω–æ —Ñ–∞–π–ª–æ–≤:** 7
- **–î–æ–±–∞–≤–ª–µ–Ω–æ —Å—Ç—Ä–æ–∫:** +69
- **–£–¥–∞–ª–µ–Ω–æ —Å—Ç—Ä–æ–∫:** -181
- **–ö–æ–º–º–∏—Ç:** `78e911d` –≤ –≤–µ—Ç–∫–µ `feature/TASK-039-refactor-package-details-endpoint`

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ Frontend

### –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è endpoint –ø–æ–ª—É—á–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π –ø–∞–∫–µ—Ç–∞
**–§–∞–π–ª:** `temp-private-2110/src/modules/Report6406Module/pages/PacketDetailsPage.tsx`

**–¢–µ–∫—É—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```typescript
const requestParams = {
  id: packageId,
  tasksSortOrder: ...,
  tasksSortBy: ...,
  tasksNumber: currentPage,
  tasksSize: pageSize,
};
const { data: packetDetails } = useGetPackageDetailsQuery(requestParams);
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: packetDetails?.tasks, packetDetails?.tasksPagination
```

**–¢—Ä–µ–±—É–µ—Ç—Å—è –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞:**
```typescript
// –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π –ø–∞–∫–µ—Ç–∞ (–±–µ–∑ –∑–∞–¥–∞—á)
const { data: packetDetails } = useGetPackageDetailsQuery({ id: packageId });

// –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á –ø–∞–∫–µ—Ç–∞ —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–π endpoint
const tasksRequestParams = {
  pagination: { number: currentPage, size: pageSize },
  sorting: { direction: sortObject?.sort, column: sortObject?.name },
  filter: filters,
  includedInPacket: packageId, // –ù–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
};
const { data: tasksData } = useGetTasksListQuery(tasksRequestParams);
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: tasksData?.items, tasksData?.totalItems
```

#### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API –∫–ª–∏–µ–Ω—Ç–∞
**–§–∞–π–ª:** `temp-private-2110/apiClient2/api/service2110/services/Report6406PackagesService.ts`

- –ú–µ—Ç–æ–¥ `getApiV1Report6406Packages1` –±–æ–ª—å—à–µ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- Response –∏–∑–º–µ–Ω–∏–ª—Å—è —Å `PackageDetailDto` –Ω–∞ `PackageDto` (–±–µ–∑ –ø–æ–ª–µ–π `tasks` –∏ `tasksPagination`)

#### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤
- –£–¥–∞–ª–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–∞ `PackageDetailDto` (–µ—Å–ª–∏ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `PackageDto` –¥–ª—è –¥–µ—Ç–∞–ª–µ–π –ø–∞–∫–µ—Ç–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `TasksListResponseDto` –¥–ª—è —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á –ø–∞–∫–µ—Ç–∞

#### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
**–§–∞–π–ª:** `temp-private-2110/src/modules/Report6406Module/pages/PacketDetailsPage.tsx`

- –£–±—Ä–∞—Ç—å –ø–µ—Ä–µ–¥–∞—á—É –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏/—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –≤ `useGetPackageDetailsQuery`
- –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–¥–∞—á —á–µ—Ä–µ–∑ `POST /api/v1/report-6406/tasks/list` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `includedInPacket`
- –û–±–Ω–æ–≤–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö: `packetDetails?.tasks` ‚Üí `tasksData?.items`, `packetDetails?.tasksPagination` ‚Üí `tasksData?.totalItems`

---

## –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ç–∞—Ç—É—Å–∞

| –î–∞—Ç–∞ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------|--------|-------------|
| 2026-02-06 | üìã –ë—ç–∫–ª–æ–≥ | –ó–∞–¥–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ |
| 2026-02-12 | ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ (Backend) | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ endpoint –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á –ø–æ –ø–∞–∫–µ—Ç—É. –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ Frontend. |
