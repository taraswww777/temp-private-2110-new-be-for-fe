# TASK-031: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ —Å—á–µ—Ç–æ–≤ –ø–µ—Ä–≤–æ–≥–æ –∏ –≤—Ç–æ—Ä–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞

**–°—Ç–∞—Ç—É—Å**: üìÖ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ
**–í–µ—Ç–∫–∞**: `feature/TASK-030-add-accounts-reference-endpoint`

---

## –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–î–æ–±–∞–≤–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ —Å—á–µ—Ç–æ–≤ –ø–µ—Ä–≤–æ–≥–æ –∏ –≤—Ç–æ—Ä–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ –≤ –≤–∏–¥–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤. –≠–Ω–¥–ø–æ–∏–Ω—Ç –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –≥–¥–µ —Å—á–µ—Ç–∞ –≤—Ç–æ—Ä–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ —Å–≤—è–∑–∞–Ω—ã —Å–æ —Å—á–µ—Ç–∞–º–∏ –ø–µ—Ä–≤–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞. –¢–∞–∫–∂–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –≤ –ë–î –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —ç—Ç–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

---

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

–í —Ñ–æ—Ä–º–µ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç—á—ë—Ç–∞ 6406 –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ–ª—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Å—á–µ—Ç–∞–º:
- `accountMask` ‚Äî –º–∞—Å–∫–∞ —Å—á–µ—Ç–∞ (—Å—á–µ—Ç–∞ –ø–µ—Ä–≤–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞)
- `accountSecondOrder` ‚Äî —Å—á–µ—Ç–∞ –≤—Ç–æ—Ä–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞

–í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è —ç—Ç–∏ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤—ã–±–∏—Ä–∞—Ç—å —Å—á–µ—Ç–∞ –∏–∑ —Å–ø–∏—Å–∫–∞. –°—á–µ—Ç–∞ –∏–º–µ—é—Ç –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É: —Å—á–µ—Ç–∞ –≤—Ç–æ—Ä–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç —Å—á–µ—Ç–∞–º –ø–µ—Ä–≤–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞.

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### Backend (service2110)

1. **–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –ë–î**:
   - –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—á–µ—Ç–æ–≤ –ø–µ—Ä–≤–æ–≥–æ –∏ –≤—Ç–æ—Ä–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞
   - –¢–∞–±–ª–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É (self-reference –∏–ª–∏ –¥–≤–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã)
   - –ü–æ–ª—è —Ç–∞–±–ª–∏—Ü—ã:
     - `id` ‚Äî UUID, –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
     - `code` ‚Äî –∫–æ–¥ —Å—á–µ—Ç–∞ (—Å—Ç—Ä–æ–∫–∞, —É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
     - `name` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—á–µ—Ç–∞ (—Å—Ç—Ä–æ–∫–∞)
     - `parentId` ‚Äî UUID, —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Å—á—ë—Ç (—Å—á—ë—Ç –ø–µ—Ä–≤–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞), NULL –¥–ª—è —Å—á–µ—Ç–æ–≤ –ø–µ—Ä–≤–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞
     - `level` ‚Äî —É—Ä–æ–≤–µ–Ω—å —Å—á—ë—Ç–∞ (1 ‚Äî –ø–µ—Ä–≤—ã–π –ø–æ—Ä—è–¥–æ–∫, 2 ‚Äî –≤—Ç–æ—Ä–æ–π –ø–æ—Ä—è–¥–æ–∫)
     - `createdAt` ‚Äî –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏
     - `updatedAt` ‚Äî –¥–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏
   - –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤:
     - –ò–Ω–¥–µ–∫—Å –Ω–∞ `parentId` –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –¥–æ—á–µ—Ä–Ω–∏—Ö —Å—á–µ—Ç–æ–≤
     - –ò–Ω–¥–µ–∫—Å –Ω–∞ `level` –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —É—Ä–æ–≤–Ω—é
     - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å –Ω–∞ `code`

2. **–°–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º—ã –ë–î** (`service2110/src/db/schema/accounts.schema.ts`):
   - –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ö–µ–º—É —Ç–∞–±–ª–∏—Ü—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Drizzle ORM
   - –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–∏–ø—ã `Account` –∏ `NewAccount`

3. **–°–æ–∑–¥–∞–Ω–∏–µ Zod —Å—Ö–µ–º** (`service2110/src/schemas/report-6406/references.schema.ts`):
   - –î–æ–±–∞–≤–∏—Ç—å —Å—Ö–µ–º—É –¥–ª—è —Å—á—ë—Ç–∞ –ø–µ—Ä–≤–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ —Å—á–µ—Ç–∞–º–∏ –≤—Ç–æ—Ä–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞:
     ```typescript
     accountFirstOrderSchema = z.object({
       code: z.string(),
       name: z.string(),
       secondOrderAccounts: z.array(accountSecondOrderSchema)
     })
     ```
   - –î–æ–±–∞–≤–∏—Ç—å —Å—Ö–µ–º—É –¥–ª—è —Å—á—ë—Ç–∞ –≤—Ç–æ—Ä–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞:
     ```typescript
     accountSecondOrderSchema = z.object({
       code: z.string(),
       name: z.string()
     })
     ```
   - –î–æ–±–∞–≤–∏—Ç—å —Å—Ö–µ–º—É –æ—Ç–≤–µ—Ç–∞: –º–∞—Å—Å–∏–≤ —Å—á–µ—Ç–æ–≤ –ø–µ—Ä–≤–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ —Å—á–µ—Ç–∞–º–∏ –≤—Ç–æ—Ä–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞

4. **–°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞** (`service2110/src/services/report-6406/references.service.ts`):
   - –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `getAccounts()`:
     - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å—á–µ—Ç–∞ –∏–∑ –ë–î
     - –°–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å —Å—á–µ—Ç–∞ –ø–æ —É—Ä–æ–≤–Ω—è–º
     - –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É (—Å—á–µ—Ç–∞ –ø–µ—Ä–≤–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ —Å—á–µ—Ç–∞–º–∏ –≤—Ç–æ—Ä–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞)
     - –í–µ—Ä–Ω—É—Ç—å –º–∞—Å—Å–∏–≤ —Å—á–µ—Ç–æ–≤ –ø–µ—Ä–≤–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞—Å—Å–∏–≤ —Å—á–µ—Ç–æ–≤ –≤—Ç–æ—Ä–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞

5. **–°–æ–∑–¥–∞–Ω–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞** (`service2110/src/routes/v1/report-6406/references/index.ts`):
   - –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç `GET /api/v1/report-6406/references/accounts`
   - –¢–µ–≥: `Report 6406 - References`
   - Summary: "–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å—á–µ—Ç–æ–≤ –ø–µ—Ä–≤–æ–≥–æ –∏ –≤—Ç–æ—Ä–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞"
   - Response 200: —Å—Ö–µ–º–∞ –æ—Ç–≤–µ—Ç–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º —Å—á–µ—Ç–æ–≤

6. **–ú–∏–≥—Ä–∞—Ü–∏—è –ë–î**:
   - –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã `accounts`
   - –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

7. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å—Ö–µ–º—ã**:
   - –î–æ–±–∞–≤–∏—Ç—å —Å—Ö–µ–º—É –≤ `service2110/src/db/schema/index.ts`
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Ö–µ–º—É –≤ `service2110/src/schemas/schema-registry.ts` –¥–ª—è Swagger
   - –î–æ–±–∞–≤–∏—Ç—å —Å—Ö–µ–º—É –≤ `service2110/src/schemas/openapi-components.ts` –¥–ª—è OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

---

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

- [ ] –¢–∞–±–ª–∏—Ü–∞ `accounts` —Å–æ–∑–¥–∞–Ω–∞ –≤ –ë–î —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∏ –∏–Ω–¥–µ–∫—Å–∞–º–∏
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î —Å–æ–∑–¥–∞–Ω–∞ –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
- [ ] –°—Ö–µ–º–∞ –ë–î –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤ `accounts.schema.ts`
- [ ] Zod —Å—Ö–µ–º—ã —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤
- [ ] –ú–µ—Ç–æ–¥ `getAccounts()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ `references.service.ts`
- [ ] –≠–Ω–¥–ø–æ–∏–Ω—Ç `GET /api/v1/report-6406/references/accounts` —Å–æ–∑–¥–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –≠–Ω–¥–ø–æ–∏–Ω—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É: –º–∞—Å—Å–∏–≤ —Å—á–µ—Ç–æ–≤ –ø–µ—Ä–≤–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞, –∫–∞–∂–¥—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞—Å—Å–∏–≤ —Å—á–µ—Ç–æ–≤ –≤—Ç–æ—Ä–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞
- [ ] –°—Ö–µ–º–∞ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ Swagger/OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- [ ] –≠–Ω–¥–ø–æ–∏–Ω—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –≤ Swagger UI –ø–æ –∞–¥—Ä–µ—Å—É `/docs`

---

## –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ç–≤–µ—Ç–∞

```json
[
  {
    "code": "40702",
    "name": "–°—á–µ—Ç–∞ –Ω–µ–≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π",
    "secondOrderAccounts": [
      {
        "code": "40702.01",
        "name": "–°—á–µ—Ç–∞ –Ω–µ–≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π, –Ω–∞—Ö–æ–¥—è—â–∏—Ö—Å—è –≤ —Ñ–µ–¥–µ—Ä–∞–ª—å–Ω–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏"
      },
      {
        "code": "40702.02",
        "name": "–°—á–µ—Ç–∞ –Ω–µ–≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π, –Ω–∞—Ö–æ–¥—è—â–∏—Ö—Å—è –≤ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ —Å—É–±—ä–µ–∫—Ç–æ–≤ –†–§"
      }
    ]
  },
  {
    "code": "40802",
    "name": "–°—á–µ—Ç–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –ª–∏—Ü",
    "secondOrderAccounts": [
      {
        "code": "40802.01",
        "name": "–°—á–µ—Ç–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –ª–∏—Ü ‚Äî –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª–µ–π"
      },
      {
        "code": "40802.02",
        "name": "–°—á–µ—Ç–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –ª–∏—Ü ‚Äî –Ω–µ –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª–µ–π"
      }
    ]
  }
]
```

---

## –û–±–ª–∞—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `service2110/src/db/schema/accounts.schema.ts` | –ù–æ–≤–∞—è —Å—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü—ã —Å—á–µ—Ç–æ–≤ |
| `service2110/src/db/schema/index.ts` | –≠–∫—Å–ø–æ—Ä—Ç –Ω–æ–≤–æ–π —Å—Ö–µ–º—ã |
| `service2110/src/schemas/report-6406/references.schema.ts` | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Zod —Å—Ö–µ–º –¥–ª—è —Å—á–µ—Ç–æ–≤ |
| `service2110/src/services/report-6406/references.service.ts` | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ `getAccounts()` |
| `service2110/src/routes/v1/report-6406/references/index.ts` | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ GET /accounts |
| `service2110/src/schemas/schema-registry.ts` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å—Ö–µ–º –¥–ª—è Swagger |
| `service2110/src/schemas/openapi-components.ts` | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º –≤ OpenAPI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã |
| `service2110/src/db/migrations/` | –ù–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã |

---

## –í–Ω–µ –≥—Ä–∞–Ω–∏—Ü –¥–∞–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏

- –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (seed data)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (temp-private-2110)
- –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–∫–æ–≤ –¥–ª—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ –≤ temp-private-2110
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—á–µ—Ç–æ–≤ (CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏)

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

- –¢–∞–±–ª–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —á–µ—Ä–µ–∑ `parentId`
- –£—Ä–æ–≤–µ–Ω—å —Å—á—ë—Ç–∞ (`level`) –º–æ–∂–Ω–æ –≤—ã—á–∏—Å–ª—è—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–ª–∏ —Ö—Ä–∞–Ω–∏—Ç—å –≤ –ë–î –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –ö–æ–¥ —Å—á—ë—Ç–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –Ω–∞ —É—Ä–æ–≤–Ω–µ –≤—Å–µ–π —Ç–∞–±–ª–∏—Ü—ã
- –°—á–µ—Ç–∞ –ø–µ—Ä–≤–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ –∏–º–µ—é—Ç `parentId = NULL` –∏ `level = 1`
- –°—á–µ—Ç–∞ –≤—Ç–æ—Ä–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ –∏–º–µ—é—Ç `parentId` —Å—Å—ã–ª–∞—é—â–∏–π—Å—è –Ω–∞ —Å—á—ë—Ç –ø–µ—Ä–≤–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ –∏ `level = 2`
- –í –æ—Ç–≤–µ—Ç–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ —Å—á–µ—Ç–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –∫–æ–¥—É

---

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –û–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ —Å self-reference (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- –û–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `accounts` —Å –ø–æ–ª–µ–º `parentId`
- –ü—Ä–æ—â–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫–µ, –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö —Å—á–µ—Ç–æ–≤
- –£—Ä–æ–≤–µ–Ω—å –º–æ–∂–Ω–æ –≤—ã—á–∏—Å–ª—è—Ç—å –∏–ª–∏ —Ö—Ä–∞–Ω–∏—Ç—å –≤ –ë–î

### –í–∞—Ä–∏–∞–Ω—Ç 2: –î–≤–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- –¢–∞–±–ª–∏—Ü–∞ `first_order_accounts` –¥–ª—è —Å—á–µ—Ç–æ–≤ –ø–µ—Ä–≤–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞
- –¢–∞–±–ª–∏—Ü–∞ `second_order_accounts` —Å –≤–Ω–µ—à–Ω–∏–º –∫–ª—é—á–æ–º –Ω–∞ `first_order_accounts`
- –ë–æ–ª–µ–µ —è–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç JOIN –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞—Ö

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç 1 (–æ–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ —Å self-reference) –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –∑–∞–ø—Ä–æ—Å–æ–≤.


–°–ú —Ç—É—Ç 
https://alice.yandex.ru/chat/019c7112-d598-4656-abb2-da2ad813f60b (–¢–∞—Ä–∞—Å)
