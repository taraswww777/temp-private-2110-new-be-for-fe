# TASK-056: Поддержка тёмной темы в Task Viewer (taskViewerFe)

**Статус**: ✅ Выполнено  
**Ветка**: `feature/TASK-056-dark-theme-support-taskviewer-fe`

---

## Краткое описание

Добавить в приложение taskViewerFe полноценную поддержку тёмной темы: переключатель темы (светлая / тёмная / по системе), сохранение выбора пользователя и единообразное применение темы ко всем экранам и компонентам.

---

## Цели

- Реализовать переключение между светлой и тёмной темой (и опционально «как в системе»)
- Сохранять выбор темы (localStorage или иной механизм) между сессиями
- Обеспечить корректное отображение всех страниц и компонентов в обеих темах
- Использовать уже заданные в проекте CSS-переменные для `.dark` и конфигурацию Tailwind `darkMode: "class"`

---

## Детальное описание

### Контекст

В `taskViewerFe` уже настроены:
- В `src/index.css` — переменные для `:root` (светлая тема) и класс `.dark` (тёмная тема)
- В `tailwind.config.js` — `darkMode: ["class"]`
- В части компонентов используются классы `dark:*` (например, TaskList, YouTrackLinkCard, MarkdownViewer)

Не хватает: механизма переключения темы, применения класса `dark` к корневому элементу (например, `<html>` или корневому div приложения), сохранения выбора пользователя и проверки всех экранов/компонентов на корректный вид в тёмной теме.

### Требования

#### 1. Переключатель темы

- Добавить в UI переключатель темы (светлая / тёмная / по системе).
- Размещение — на усмотрение (шапка, настройки, иконка в углу и т.д.).
- При выборе «по системе» использовать `prefers-color-scheme: dark` для определения темы.

#### 2. Применение темы

- При загрузке приложения: читать сохранённое значение (или «system»), применять соответствующую тему.
- Для тёмной темы добавлять класс `dark` на корневой элемент (например, `document.documentElement.classList.add('dark')`), для светлой — удалять.
- При «system» — подписаться на `matchMedia('(prefers-color-scheme: dark)')` и обновлять класс при смене системной темы.

#### 3. Сохранение выбора

- Сохранять выбранную тему (light / dark / system) в localStorage (или аналог), чтобы при следующем визите тема восстанавливалась.

#### 4. Покрытие UI

- Пройти по основным страницам и компонентам (в т.ч. `src/components/ui/`), при необходимости добавить классы `dark:*` или использование общих переменных (background, foreground, border и т.д.), чтобы не было «слепых» светлых областей в тёмной теме и наоборот.
- Убедиться, что текст, границы, фоны и интерактивные элементы читаемы и контрастны в обеих темах.

### Критерии приёмки

- [ ] В приложении есть переключатель темы (светлая / тёмная / по системе)
- [ ] Выбор темы сохраняется между перезагрузками страницы
- [ ] При выборе «по системе» тема следует за настройкой ОС/браузера
- [ ] Класс `dark` корректно выставляется/снимается с корневого элемента
- [ ] Основные экраны и компоненты (список задач, детали задачи, формы, диалоги, UI Kit) выглядят корректно в обеих темах без «битых» контрастов или фонов

### Связанные артефакты

- `taskViewerFe/src/index.css` — переменные для светлой и тёмной темы
- `taskViewerFe/tailwind.config.js` — `darkMode: "class"`
- `taskViewerFe/src/components/ui/*` — компоненты, которые должны поддерживать обе темы
- Корневой компонент приложения (место подключения переключателя и инициализации темы)

---

## Примечания

- Задача касается только фронтенда (taskViewerFe); бэкенд не затрагивается.
- При реализации TASK-055 (Storybook) имеет смысл добавить переключатель темы и в Storybook, чтобы проверять компоненты в тёмной теме.
