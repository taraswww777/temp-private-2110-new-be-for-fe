# TASK-029: Преобразование DepartmentField в компонент с множественным выбором

**Статус**: ⏳ В работе  
**Ветка (основной репозиторий)**: `feature/TASK-029-department-field-multiple-selection`  
**Ветка (подрепозиторий temp-private-2110)**: `feature/VTB-531/FE-dorabotki-po-tipovomu-shablonu-02-02-2026`

---

## Краткое описание

Преобразовать компонент `DepartmentField` в компонент с множественным выбором на основе `SimpleSelectField`. В настоящее время компонент использует `multiple={isAllSelected}`, что не обеспечивает полноценный множественный выбор. Необходимо реализовать корректную работу с множественным выбором значений.

---

## Контекст

Компонент `DepartmentField` находится в `temp-private-2110/src/modules/ReportTemplateModule/components/fields/DepartmentField.tsx` и используется в формах фильтров и создания отчётов. В настоящее время компонент имеет частичную реализацию множественного выбора через `SelectAllCheckbox`, но не поддерживает полноценный выбор нескольких элементов.

---

## Требования

### Frontend (temp-private-2110)

1. **Обновить DepartmentField**:
   - Реализовать полноценный множественный выбор на основе `SimpleSelectField`
   - Использовать проп `multiple` из `SearchSelectFieldProps` (@admiral-ds/react-ui)
   - Обеспечить корректную работу с массивом выбранных значений в форме (`string[]`)
   - Сохранить функциональность `SelectAllCheckbox` для выбора всех элементов
   - Обеспечить возможность одним действием **сразу выбрать все филиалы** и так же быстро снять выбор со всех

2. **Типы и интерфейсы**:
   - Убедиться, что поле формы `department` корректно работает с типом `string[]`
   - Обновить типы, если необходимо

3. **Тестирование**:
   - Проверить работу множественного выбора в `ReportsFiltersModal`
   - Проверить работу множественного выбора в `CreateReportFormModal`
   - Убедиться, что `SelectAllCheckbox` корректно работает с множественным выбором

---

## Критерии приёмки

- [ ] `DepartmentField` поддерживает множественный выбор значений
- [ ] Компонент корректно работает с массивом строк в поле формы
- [ ] `SelectAllCheckbox` корректно выбирает/снимает выбор со всех элементов
- [ ] Компонент работает в `ReportsFiltersModal`
- [ ] Компонент работает в `CreateReportFormModal`
- [ ] Изменения не нарушают существующую функциональность

---

## Область изменений

| Файл | Описание |
|------|----------|
| `temp-private-2110/src/modules/ReportTemplateModule/components/fields/DepartmentField.tsx` | Обновление компонента для поддержки множественного выбора |

---

## Вне границ данной задачи

- Изменения в других полях формы (FormatField, TypeField, StatusField, CurrencyField, SourceField)
- Изменения в `SimpleSelectField` или его типах
- Изменения в логике фильтрации или создания отчётов

---

## Дополнительные заметки

- Компонент `SimpleSelectField` наследуется от `SearchSelectFieldProps` из `@admiral-ds/react-ui`, который должен поддерживать проп `multiple`
- Текущая реализация использует `multiple={isAllSelected}`, что не является корректным множественным выбором
- Необходимо убедиться, что `SelectField` из `@admiral-ds/react-ui` корректно обрабатывает массив значений при `multiple={true}`

### Репозитории, ветки и коммиты

- Работа над функциональностью выполняется также в подрепозитории `temp-private-2110/` в ветке  
  `feature/VTB-531/FE-dorabotki-po-tipovomu-shablonu-02-02-2026`.
- **Коммиты в подрепо**:
  - Сообщение коммита **обязательно** должно начинаться с префикса `VTB-531`
  - Далее — лаконичное описание на английском языке в одну строку  
    (например: `VTB-531: implement multiple department selection`).
